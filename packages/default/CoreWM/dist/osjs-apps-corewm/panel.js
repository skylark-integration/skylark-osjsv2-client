/**
 * osjs-apps-corewm - 
 * @author 
 * @version v1.0.0
 * @link 
 * @license 
 */
define(["./locales","./panelitem"],function(t,e){"use strict";const i=OSjs.require("core/locales").createLocalizer(t),n=OSjs.require("utils/dom"),o=OSjs.require("utils/events"),s=OSjs.require("gui/menu"),u=OSjs.require("core/window-manager");return class{constructor(t,e,i){e=e||{},this._name=t,this._$element=null,this._$container=null,this._items=[],this._outtimeout=null,this._intimeout=null,this._options=e.mergeDefaults({position:"top"}),console.debug("Panel::construct()",this._name,this._options.get())}init(t){var e=u.instance;this._$container=document.createElement("corewm-panel-container"),this._$element=document.createElement("corewm-panel"),this._$element.setAttribute("data-orientation","horizontal"),this._$element.setAttribute("role","toolbar"),o.$bind(this._$element,"mouseover",t=>{this.onMouseOver(t)}),o.$bind(this._$element,"mouseout",t=>{this.onMouseOut(t)}),o.$bind(this._$element,"contextmenu",function(t){t.target&&"button"===t.target.getAttribute("role")||function(t){var n=[{title:i("Open Panel Settings"),onClick:function(t){e.showSettings("panel")}}];!0===e.getSetting("useTouchMenu")?n.push({title:i("Turn off TouchMenu"),onClick:function(t){e.applySettings({useTouchMenu:!1},!1,!0)}}):n.push({title:i("Turn on TouchMenu"),onClick:function(t){e.applySettings({useTouchMenu:!0},!1,!0)}}),s.create(n,t)}(t)}),o.$bind(document,"mouseout:panelmouseleave",t=>{this.onMouseLeave(t)},!1),this._$element.appendChild(this._$container),t.appendChild(this._$element),setTimeout(()=>this.update(),0)}destroy(){this._clearTimeouts(),o.$unbind(document,"mouseout:panelmouseleave"),o.$unbind(this._$element),this._items.forEach(function(t){t.destroy()}),this._items=[],this._$element=n.$remove(this._$element),this._$container=null}update(t){var e={ontop:!!(t=t||this._options.get()).ontop,position:t.position||"bottom"};t.autohide&&this.onMouseOut(),this._$element&&Object.keys(e).forEach(t=>{this._$element.setAttribute("data-"+t,"boolean"==typeof e[t]?e[t]?"true":"false":e[t])}),this._options.set(null,t)}autohide(t){this._options.get("autohide")&&this._$element&&(t?this._$element.setAttribute("data-autohide","true"):this._$element.setAttribute("data-autohide","false"))}_clearTimeouts(){this._outtimeout&&(clearTimeout(this._outtimeout),this._outtimeout=null),this._intimeout&&(clearTimeout(this._intimeout),this._intimeout=null)}onMouseLeave(t){var e=t.relatedTarget||t.toElement;e&&"HTML"!==e.nodeName||this.onMouseOut(t)}onMouseOver(){this._clearTimeouts(),this._intimeout=setTimeout(()=>{this.autohide(!1)},150)}onMouseOut(){this._clearTimeouts(),this._outtimeout=setTimeout(()=>{this.autohide(!0)},600)}addItem(t){if(!(t instanceof e))throw"Expected a PanelItem in Panel::addItem()";this._items.push(t),this._$container.appendChild(t.init())}isAutoHidden(){return!!this._$element&&"true"===this._$element.getAttribute("data-autohide")}getItemByType(t){return this.getItem(t)}getItemsByType(t){return this.getItem(t,!0)}getItem(t,e){var i=e?[]:null;return this._items.forEach(function(n,o){if(n instanceof t){if(!e)return i=n,!1;i.push(n)}return!0}),i}getOntop(){return this._options.get("ontop")}getPosition(t){return t?this._options.get("position")===t:this._options.get("position")}getAutohide(){return this._options.get("autohide")}getRoot(){return this._$element}getHeight(){return this._$element?this._$element.offsetHeight:0}}});
//# sourceMappingURL=sourcemaps/panel.js.map
