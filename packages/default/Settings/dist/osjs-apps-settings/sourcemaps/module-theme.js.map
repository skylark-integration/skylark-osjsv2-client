{"version":3,"sources":["module-theme.js"],"names":["define","Translations","Locales","OSjs","require","Dialog","FileMetadata","Theme","_","createLocalizer","group","name","label","icon","watch","init","update","win","scheme","settings","wm","_find","set","wallpaper","backgroundColor","fontFamily","styleTheme","iconTheme","useTouchMenu","background","render","root","_createDialog","n","a","done","_toggleDisabled","create","ev","button","result","tmp","add","getStyleThemes","map","t","title","value","getIconThemes","Object","keys","on","mime","file","detail","path","color","hex","fontName","fontSize","save","get"],"mappings":"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","file":"../module-theme.js","sourcesContent":["define(['./locales'], function (Translations) {\n    'use strict';\n    const Locales = OSjs.require('core/locales');\n    const Dialog = OSjs.require('core/dialog');\n    const FileMetadata = OSjs.require('vfs/file');\n    const Theme = OSjs.require('core/theme');\n    const _ = Locales.createLocalizer(Translations);\n    return {\n        group: 'personal',\n        name: 'Theme',\n        label: 'LBL_THEME',\n        icon: 'apps/preferences-desktop-wallpaper.png',\n        watch: ['CoreWM'],\n        init: function () {\n        },\n        update: function (win, scheme, settings, wm) {\n            win._find('BackgroundImage').set('value', settings.wallpaper);\n            win._find('BackgroundColor').set('value', settings.backgroundColor);\n            win._find('FontName').set('value', settings.fontFamily);\n            win._find('StyleThemeName').set('value', settings.styleTheme);\n            win._find('IconThemeName').set('value', settings.iconTheme);\n            win._find('EnableTouchMenu').set('value', settings.useTouchMenu);\n            win._find('BackgroundStyle').set('value', settings.background);\n            win._find('BackgroundImage').set('value', settings.wallpaper);\n            win._find('BackgroundColor').set('value', settings.backgroundColor);\n        },\n        render: function (win, scheme, root, settings, wm) {\n            function _createDialog(n, a, done) {\n                win._toggleDisabled(true);\n                Dialog.create(n, a, function (ev, button, result) {\n                    win._toggleDisabled(false);\n                    if (button === 'ok' && result) {\n                        done(result);\n                    }\n                }, win);\n            }\n            win._find('StyleThemeName').add(Theme.getStyleThemes().map(function (t) {\n                return {\n                    label: t.title,\n                    value: t.name\n                };\n            }));\n            win._find('IconThemeName').add(function (tmp) {\n                return Object.keys(tmp).map(function (t) {\n                    return {\n                        label: tmp[t],\n                        value: t\n                    };\n                });\n            }(Theme.getIconThemes()));\n            win._find('BackgroundImage').on('open', function (ev) {\n                _createDialog('File', {\n                    mime: ['^image'],\n                    file: new FileMetadata(ev.detail)\n                }, function (result) {\n                    win._find('BackgroundImage').set('value', result.path);\n                });\n            });\n            win._find('BackgroundColor').on('open', function (ev) {\n                _createDialog('Color', { color: ev.detail }, function (result) {\n                    win._find('BackgroundColor').set('value', result.hex);\n                }, win);\n            });\n            win._find('FontName').on('click', function () {\n                _createDialog('Font', {\n                    fontName: settings.fontFamily,\n                    fontSize: -1\n                }, function (result) {\n                    win._find('FontName').set('value', result.fontName);\n                }, win);\n            });\n            win._find('BackgroundStyle').add([\n                {\n                    value: 'image',\n                    label: _('LBL_IMAGE')\n                },\n                {\n                    value: 'image-repeat',\n                    label: _('Image (Repeat)')\n                },\n                {\n                    value: 'image-center',\n                    label: _('Image (Centered)')\n                },\n                {\n                    value: 'image-fill',\n                    label: _('Image (Fill)')\n                },\n                {\n                    value: 'image-strech',\n                    label: _('Image (Streched)')\n                },\n                {\n                    value: 'color',\n                    label: _('LBL_COLOR')\n                }\n            ]);\n        },\n        save: function (win, scheme, settings, wm) {\n            settings.styleTheme = win._find('StyleThemeName').get('value');\n            settings.iconTheme = win._find('IconThemeName').get('value');\n            settings.useTouchMenu = win._find('EnableTouchMenu').get('value');\n            settings.wallpaper = win._find('BackgroundImage').get('value');\n            settings.backgroundColor = win._find('BackgroundColor').get('value');\n            settings.background = win._find('BackgroundStyle').get('value');\n            settings.fontFamily = win._find('FontName').get('value');\n        }\n    };\n});"]}