/**
 * osjs-apps-settings - 
 * @author 
 * @version v1.0.0
 * @link 
 * @license 
 */
!function(e,n){var t=n.define,require=n.require,a="function"==typeof t&&t.amd,i=!a&&"undefined"!=typeof exports;if(!a&&!t){var o={};t=n.define=function(e,n,t){"function"==typeof t?(o[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),a=e.split("/");t.pop();for(var i=0;i<a.length;i++)"."!=a[i]&&(".."==a[i]?t.pop():t.push(a[i]));return t.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("osjs-apps-settings/locales",[],function(){"use strict";return{bg_BG:{"Background Type":"Тип на фон","Image (Repeat)":"Изображение (повтарящо се)","Image (Centered)":"Изображение (Центрирано)","Image (Fill)":"Изображение (Запълващо)","Image (Streched)":"Изображение (Разтеглено)","Desktop Margin ({0}px)":"Размер на работен плот ({0}px)","Enable Animations":"Разреши анимации","Language (requires restart)":"Език (нуждае се от рестарт)","Enable Sounds":"Включи звуци","Enable Window Switcher":"Включи превключване на прозорци","Enable Hotkeys":"Включи горещи клавиши","Enable Icon View":"Включи иконен-изглед"},de_DE:{"Background Type":"Hintergrundtyp","Image (Repeat)":"Bild (Wiederholend)","Image (Centered)":"Bild (Zentriert)","Image (Fill)":"Bild (Ausgefüllt)","Image (Streched)":"Bild (Gestreckt)","Desktop Margin ({0}px)":"Arbeitsoberflächen Margin ({0}px)","Enable Animations":"Animationen verwenden","Language (requires restart)":"Sprache (benötigt Neustart)","Enable Sounds":"Aktiviere Sounds","Enable Window Switcher":"Aktiviere Fensterwechsler","Enable Hotkeys":"Aktiviere Hotkeys","Enable Icon View":"Aktiviere Icon-Ansicht"},es_ES:{"Background Type":"Tipo de fondo","Image (Repeat)":"Imagen (Repetir)","Image (Centered)":"Imagen (Centrada)","Image (Fill)":"Imagen (Estirar)","Image (Streched)":"Imagen (Ajustar)","Desktop Margin ({0}px)":"Margen del escritorio ({0}px)","Enable Animations":"Habilitar animaciones","Language (requires restart)":"Idioma (requiere reiniciar)","Enable Sounds":"Activar sonidos","Enable Window Switcher":"Activar el alternador de ventanas","Enable Hotkeys":"Activar Hotkeys","Enable Icon View":"Activar la vista de icono"},ar_DZ:{"Background Type":"نوع الخلفية","Image (Repeat)":"صورة (إعادة)","Image (Centered)":"صورة (وسط)","Image (Fill)":"صورة (ملئ)","Image (Streched)":"صورة (تمدد)","Desktop Margin ({0}px)":"هوامش المكتب ({0}px)","Enable Animations":"تفعيل الحركة","Language (requires restart)":"اللغة (تتطب إعادة التشغيل)","Enable Sounds":"تفعيل الأصوات","Enable Window Switcher":"تفعيل محول النوافذ","Enable Hotkeys":"تفعيل إختصارات لوحة المفاتيح","Enable Icon View":"تفعيل مظهر الأيقونات","Remove shortcut":"حذف الإختصار","File View":"خصائص الملفات","Show Hidden Files":"إظهار الملفات المخفية","Show File Extensions":"إظهار لواحق الملفات","File View Options":"خيارات إظهار الملفات","Invert Text Color":"عكس لون الخط","Icon View":"إظهار الأيقونات","Installed Packages":"حزم مثبتة","App Store":"متجر التطبيقات","Regenerate metadata":"إعادة توليد المعلومات","Install from zip":"تثبيت من ملف مضغوط","Install selected":"تثبيت المختار","Enable TouchMenu":"تفعيل قائمة اللمس"},fr_FR:{"Background Type":"Type de fond d'écran","Image (Repeat)":"Image (Répéter)","Image (Centered)":"Image (Centrer)","Image (Fill)":"Image (Remplir)","Image (Streched)":"Image (Étiré)","Desktop Margin ({0}px)":"Marge du bureau ({0}px)","Desktop Corner Snapping ({0}px)":"Délimitation des coins du bureau ({0}px)","Window Snapping ({0}px)":"Accrochage des fenêtres ({0}px)","Enable Animations":"Activer les animations","Language (requires restart)":"Langue (redémarrage requis)","Enable Sounds":"Activer la musique","Enable Window Switcher":"Activer Window Switcher","Enable Hotkeys":"Activer les raccourcis clavier","Enable Icon View":"Activer l'affichage des icônes sur le bureau","Remove shortcut":"Supprimer le raccourci","File View":"Options des fichiers","Show Hidden Files":"Montrer les fichiers cachés","Show File Extensions":"Montrer les extensions de fichiers","File View Options":"Options d'affichage des fichier","Invert Text Color":"Inverser la couleur du texte","Icon View":"Affichage des icônes","Installed Packages":"Paquets installés","App Store":"Magasin d'applications","Regenerate metadata":"Régénérer les métadonnées","Install from zip":"Installer à partir du fichier zip","Install selected":"Installer la sélection","Enable TouchMenu":"Activer le TouchMenu"},it_IT:{"Background Type":"Tipo di sfondo","Image (Repeat)":"Immagine (Ripeti)","Image (Centered)":"Immagine (Centrata)","Image (Fill)":"Immagine (Riempi)","Image (Streched)":"Immagine (Distorci)","Desktop Margin ({0}px)":"Margini Scrivania ({0}px)","Enable Animations":"Abilita animazioni","Language (requires restart)":"Lingua (necessita riavvio)","Enable Sounds":"Abilita Suoni","Enable Window Switcher":"Abilita Cambia-Finestre","Enable Hotkeys":"Abilita Scorciatoie da tastiera","Enable Icon View":"Abilita Visualizzazione ad icona","Remove shortcut":"Rimuovi scorciatoia","File View":"Visualizza file","Show Hidden Files":"Mostra file nascosti","Show File Extensions":"Mostra estenzioni dei file","File View Options":"Opzioni visualizza file","Invert Text Color":"Inverti colore testi","Icon View":"Visualizzazione ad icone","Installed Packages":"Installa pacchetti","App Store":"Negozio applicazioni",Application:"Applicazione",Scope:"Scope (namespace)","Regenerate metadata":"Rigenerazione metadata","Install from zip":"Installa da zip","Install selected":"Installa selezionato","Enable TouchMenu":"Abilita TouchMenu"},ko_KR:{"Background Type":"바탕화면 타입","Image (Repeat)":"이미지 (반복)","Image (Centered)":"이미지 (가운데)","Image (Fill)":"이미지 (채우기)","Image (Streched)":"이미지 (늘이기)","Desktop Margin ({0}px)":"데스크탑 여백 ({0}px)","Enable Animations":"애니메이션 효과 켜기","Language (requires restart)":"언어 (재시작 필요)","Enable Sounds":"사운드 켜기","Enable Window Switcher":"윈도우 전환 활성","Enable Hotkeys":"단축키 활성","Enable Icon View":"아이콘 보이기","Desktop Corner Snapping ({0}px)":"바탕화면 가장자리에 붙이기 ({0}px)","Window Snapping ({0}px)":"창 가장자리에 붙이기 ({0}px)","File View":"파일보기","Show Hidden Files":"숨긴 파일 보이기","Show File Extensions":"파일 확장자 보이기","File View Options":"파일보기 옵션","Invert Text Color":"텍스트 색상 반전","Icon View":"아이콘 보기","Installed Packages":"설치된 패키지","App Store":"앱스토어","Regenerate metadata":"메타데이터 재생성","Install from zip":"zip 파일로부터 설치하기","Install selected":"선택된 항목 설치","Enable TouchMenu":"터치메뉴 활성화","Search Options":"검색 옵션","Enable Application Search":"어플리케이션 검색 활성화","Enable File Search":"파일 검색 활성화"},nl_NL:{"Background Type":"Achtergrond type","Image (Repeat)":"Afbeelding (Herhalend)","Image (Centered)":"Afbeelding (Gecentreerd)","Image (Fill)":"Afbeelding (Passend)","Image (Streched)":"Afbeelding (Uitrekken)","Desktop Margin ({0}px)":"Achtergrondmarge ({0}px)","Enable Animations":"Animaties gebruiken","Language (requires restart)":"Taal (Herstarten vereist)","Enable Sounds":"Activeer Geluiden","Enable Window Switcher":"Activeer Venster Wisselaar","Enable Hotkeys":"Activeer Hotkeys","Enable Icon View":"Activeer Iconen-weergave"},no_NO:{"Background Type":"Bakgrunn type","Image (Repeat)":"Bilde (Gjenta)","Image (Centered)":"Bilde (Sentrert)","Image (Fill)":"Bilde (Fyll)","Image (Streched)":"Bilde (Strekk)","Desktop Margin ({0}px)":"Skrivebord Margin ({0}px)","Enable Animations":"Bruk animasjoner","Language (requires restart)":"Språk (krever omstart)","Enable Sounds":"Skru på lyder","Enable Window Switcher":"Skru på Vindu-bytter","Enable Hotkeys":"Skru på Hurtigtaster","Enable Icon View":"Skru på Ikonvisning","Remove shortcut":"Fjern snarvei","Search path '{0}' is already handled by another entry":"Søkestien '{0}' er allrede håndtert av en annen oppføring"},pl_PL:{"Background Type":"Typ Tła","Image (Repeat)":"Powtarzający się","Image (Centered)":"Wycentrowany","Image (Fill)":"Wypełniony","Image (Streched)":"Rozciągnięty","Desktop Margin ({0}px)":"Margines Pulpitu ({0}px)","Desktop Corner Snapping ({0}px)":"Przyciąganie do Narożników Pulpitu ({0}px)","Window Snapping ({0}px)":"Przyciąganie do Okien ({0}px)","Enable Animations":"Włączone Animacje","Icon View":"Widok Ikon","Language (requires restart)":"Język (zmiana wymaga restartu)","Enable Sounds":"Włączone Dźwięki","Enable TouchMenu":"Włączone Menu Dotykowe","Enable Window Switcher":"Właczony Zmieniacz Okien","Enable Hotkeys":"Włączone Skróty Klawiaturowe","Enable Icon View":"Włączone Pokazywanie Ikon","Remove shortcut":"Usuwanie skrótu","File View":"Widok Plików","Show Hidden Files":"Pokazuj Ukryte Pliki","Show File Extensions":"Pokazuj Rozszerzenia Plików","File View Options":"Opcje Widoku Plików","Invert Text Color":"Odwróć Kolor Tekstu","Installed Packages":"Zainstalowane Pakiety","App Store":"Sklep App","Regenerate metadata":"Zregeneruj metadane","Install from zip":"Zainstaluj z pliku zip","Install selected":"Zainstaluj wybrane"},ru_RU:{"Background Type":"Тип фона","Image (Repeat)":"Изображение (повторяющееся)","Image (Centered)":"Изображение (по центру)","Image (Fill)":"Изображение (заполнить)","Image (Streched)":"Изображение (растянуть)","Desktop Margin ({0}px)":"Отступ рабочего стола ({0}px)","Enable Animations":"Использовать анимацию","Enable TouchMenu":"Крупное меню","Language (requires restart)":"Язык (необходим перезапуск)","Enable Sounds":"Включить звук","Enable Window Switcher":"Включить растягивание окон","Enable Hotkeys":"Включить горячии клавиши","Enable Icon View":"Включить ярлыки","Icon View":"Ярлыки рабочего стола","Invert Text Color":"Обратить цвет текста"},sk_SK:{"Background Type":"Typ pozadia","Image (Repeat)":"Dlaždice","Image (Centered)":"Na stred","Image (Fill)":"Vyplniť","Image (Streched)":"Roztiahnutý","Desktop Margin ({0}px)":"Hranice pracovnej plochy ({0}px)","Enable Animations":"Povoliť animácie","Language (requires restart)":"Jazyk (vyžaduje reštart)","Enable Sounds":"Povoliť zvuky","Enable Window Switcher":"Povoliť Prepínač Okien","Enable Hotkeys":"Klávesové skratky","Enable Icon View":"Ikony na ploche","Remove shortcut":"Odstrániť skratku"},tr_TR:{"Background Type":"arkaplan türü","Image (Repeat)":"resim (tekrarla)","Image (Centered)":"resm(ortala)","Image (Fill)":"resm (kapla/doldur)","Image (Streched)":"resm (uzat)","Desktop Margin ({0}px)":"masaüstü kenar ({0}px)","Enable Animations":"animasyonlar etkin","Language (requires restart)":"Dil(yeniden başlatma gerektirir)","Enable Sounds":"Müzik etkin","Enable Window Switcher":"Ekran(pencere) değiştirme etkin","Enable Hotkeys":"kısayol tuşları etkin","Enable Icon View":"icon görünümü etkin","Remove shortcut":"kısayolları kaldır"},vi_VN:{"Background Type":"Kiểu nền","Image (Repeat)":"Lặp lại","Image (Centered)":"Căn giữa","Image (Fill)":"Lấp đầy","Image (Streched)":"Trải dài","Desktop Margin ({0}px)":"Phần biên màn hình ({0}px)","Enable Animations":"Bật hiệu ứng","Language (requires restart)":"Ngôn ngữ (cần khởi động lại)","Enable Sounds":"Bật âm thanh","Enable Window Switcher":"Bật chuyển đổi cửa sổ","Enable Hotkeys":"Bật phím nóng","Enable Icon View":"Hiện biểu tượng","Remove shortcut":"Xóa lối tắt","File View":"Quản lí tệp","Show Hidden Files":"Hiện tập tin ẩn","Show File Extensions":"Hiện đuôi tập tin","File View Options":"Cài đặt quản lí tệp","Icon View":"Biểu tượng","Installed Packages":"Các phần mềm đã cài","App Store":"Chợ ứng dụng","Regenerate metadata":"Làm mới metadata","Install from zip":"Cài từ file zip","Install selected":"Cài mục đã chọn","Enable TouchMenu":"Bật Menu cảm ứng","Invert Text Color":"Đảo màu chữ","Search Options":"Cài đặt tìm kiếm","Enable Application Search":"Cho phép tìm kiếm phần mềm","Enable File Search":"Cho phép tìm kiếm tập tin","Search path '{0}' is already handled by another entry":"Đường dẫn tìm kiếm '{0}' đã bị xử lý bởi mục khác"}}}),e("osjs-apps-settings/module-desktop",["./locales"],function(e){"use strict";const n=OSjs.require("core/locales"),t=OSjs.require("core/theme"),a=OSjs.require("utils/misc"),i=OSjs.require("core/package-manager"),o=n.createLocalizer(e);let r=[],s=[];function l(e,n){const i=[];r.forEach(function(e,n){const o=e.name;s[o]&&i.push({value:n,columns:[{icon:t.getIcon(s[o].Icon),label:a.format("{0} ({1})",s[o].Name,s[o].Description)}]})});const o=e._find("WidgetItems");o.clear(),o.add(i)}function c(e,n,t){const i=a.format(o({DesktopMargin:"Desktop Margin ({0}px)",CornerSnapping:"Desktop Corner Snapping ({0}px)",WindowSnapping:"Window Snapping ({0}px)"}[n]),t);e._find(n+"Label").set("value",i)}return{group:"personal",name:"Desktop",label:"LBL_DESKTOP",icon:"devices/video-display.png",watch:["CoreWM"],init:function(e){},update:function(e,n,t,a){e._find("EnableAnimations").set("value",t.animations),e._find("EnableTouchMenu").set("value",t.useTouchMenu),e._find("EnableWindowSwitcher").set("value",t.enableSwitcher),e._find("DesktopMargin").set("value",t.desktopMargin),e._find("CornerSnapping").set("value",t.windowCornerSnap),e._find("WindowSnapping").set("value",t.windowSnap),c(e,"DesktopMargin",t.desktopMargin),c(e,"CornerSnapping",t.windowCornerSnap),c(e,"WindowSnapping",t.windowSnap),s=i.getPackage("CoreWM").widgets,r=t.widgets||[],l(e)},render:function(e,n,i,o,u){e._find("DesktopMargin").on("change",function(n){c(e,"DesktopMargin",n.detail)}),e._find("CornerSnapping").on("change",function(n){c(e,"CornerSnapping",n.detail)}),e._find("WindowSnapping").on("change",function(n){c(e,"WindowSnapping",n.detail)}),e._find("EnableIconView").set("value",o.enableIconView),e._find("EnableIconViewInvert").set("value",o.invertIconViewColor),e._find("WidgetButtonAdd").on("click",function(){e._toggleDisabled(!0),function(e,n,i){if(n){const o=e._app,r=new OSjs.Applications.ApplicationSettings.SettingsItemDialog(o,o.__metadata,n,i);r._on("inited",function(e){r._find("List").clear().add(Object.keys(s).map(function(e,n){return{value:e,columns:[{icon:t.getIcon(s[e].Icon),label:a.format("{0} ({1})",s[e].Name,s[e].Description)}]}})),r._setTitle("Widgets",!0)}),e._addChild(r,!0,!0)}}(e,n,function(n,t){e._toggleDisabled(!1),t&&(r.push({name:t.data}),l(e))})}),e._find("WidgetButtonRemove").on("click",function(){const n=e._find("WidgetItems").get("selected");n.length&&(r.splice(n[0].index,1),l(e))}),e._find("WidgetButtonOptions").on("click",function(){})},save:function(e,n,t,a){t.animations=e._find("EnableAnimations").get("value"),t.useTouchMenu=e._find("EnableTouchMenu").get("value"),t.enableSwitcher=e._find("EnableWindowSwitcher").get("value"),t.desktopMargin=e._find("DesktopMargin").get("value"),t.windowCornerSnap=e._find("CornerSnapping").get("value"),t.windowSnap=e._find("WindowSnapping").get("value"),t.enableIconView=e._find("EnableIconView").get("value"),t.invertIconViewColor=e._find("EnableIconViewInvert").get("value"),t.widgets=r}}}),e("osjs-apps-settings/module-input",["./locales"],function(e){"use strict";const n=OSjs.require("core/locales"),t=OSjs.require("core/dialog"),a=OSjs.require("utils/misc"),i=n.createLocalizer(e);let o={};function r(e,n){e._find("HotkeysList").clear().add(Object.keys(o).map(function(e){return{value:{name:e,value:o[e]},columns:[{label:e},{label:o[e]}]}}))}return{group:"system",name:"Input",label:"LBL_INPUT",icon:"apps/preferences-desktop-keyboard-shortcuts.png",init:function(){},update:function(e,n,t,i){e._find("EnableHotkeys").set("value",t.enableHotkeys),o=a.cloneObject(t.hotkeys),r(e,n)},render:function(e,n,a,s,l){e._find("HotkeysEdit").on("click",function(){const a=e._find("HotkeysList").get("selected");a&&a[0]&&function(e,n,a){e._toggleDisabled(!0),t.create("Input",{message:i("Enter shortcut for:")+" "+a.name,value:a.value},function(t,i,s){e._toggleDisabled(!1),-1!==(s=s||"").indexOf("+")&&(o[a.name]=s),r(e,n)})}(e,n,a[0].data)})},save:function(e,n,t,a){t.enableHotkeys=e._find("EnableHotkeys").get("value"),o&&Object.keys(o).length&&(t.hotkeys=o)}}}),e("osjs-apps-settings/module-locale",[],function(){"use strict";const e=OSjs.require("core/config"),n=OSjs.require("core/locales");return{group:"user",name:"Locale",label:"LBL_LOCALE",icon:"apps/accessories-character-map.png",init:function(){},update:function(t,a,i,o){const r=e.getConfig(),s=r.Languages;t._find("UserLocale").clear().add(Object.keys(s).filter(function(e){return!!OSjs.Locales[e]}).map(function(e){return{label:s[e],value:e}})).set("value",n.getLocale())},render:function(e,n,t,a,i){},save:function(e,n,t,a){t.language=e._find("UserLocale").get("value")}}}),e("osjs-apps-settings/module-panel",[],function(){"use strict";const e=OSjs.require("core/package-manager"),n=OSjs.require("core/locales"),t=OSjs.require("core/dialog"),a=OSjs.require("core/theme"),i=OSjs.require("utils/misc");let o,r=[],s=[],l=0;function c(e,n){let t=!0;try{const e=s[o.items[n].name];t=!0===e.HasOptions}catch(e){}e._find("PanelButtonOptions").set("disabled",n<0||!t),e._find("PanelButtonRemove").set("disabled",n<0),e._find("PanelButtonUp").set("disabled",n<=0),e._find("PanelButtonDown").set("disabled",n<0||n>=l)}function u(e,n){const t=[];r.forEach(function(e,n){const o=e.name;s[o]&&t.push({value:n,columns:[{icon:a.getIcon(s[o].Icon),label:i.format("{0} ({1})",s[o].Name,s[o].Description)}]})}),l=r.length-1;const o=e._find("PanelItems");o.clear(),o.add(t),void 0!==n?(o.set("selected",n),c(e,n)):c(e,-1)}function d(e,n,t){const a=r[n],i=n+t;r.splice(n,1),r.splice(i,0,a),u(e,i)}function g(e,n,a){e._toggleDisabled(!0),t.create("Color",{color:n},function(n,t,i){e._toggleDisabled(!1),"ok"===t&&i&&a(i.hex)},e)}return{group:"personal",name:"Panel",label:"LBL_PANELS",icon:"apps/gnome-panel.png",watch:["CoreWM"],init:function(){},update:function(n,t,a,i){let l=85;"number"==typeof(o=a.panels[0]).options.opacity&&(l=o.options.opacity),n._find("PanelPosition").set("value",o.options.position),n._find("PanelAutoHide").set("value",o.options.autohide),n._find("PanelOntop").set("value",o.options.ontop),n._find("PanelBackgroundColor").set("value",o.options.background||"#101010"),n._find("PanelForegroundColor").set("value",o.options.foreground||"#ffffff"),n._find("PanelOpacity").set("value",l),s=e.getPackage("CoreWM").panelItems,r=o.items||[],u(n)},render:function(e,t,o,l,p){e._find("PanelPosition").add([{value:"top",label:n._("LBL_TOP")},{value:"bottom",label:n._("LBL_BOTTOM")}]),e._find("PanelBackgroundColor").on("open",function(n){g(e,n.detail,function(n){e._find("PanelBackgroundColor").set("value",n)})}),e._find("PanelForegroundColor").on("open",function(n){g(e,n.detail,function(n){e._find("PanelForegroundColor").set("value",n)})}),e._find("PanelItems").on("select",function(n){n&&n.detail&&n.detail.entries&&n.detail.entries.length&&c(e,n.detail.entries[0].index)}),e._find("PanelButtonAdd").on("click",function(){e._toggleDisabled(!0),function(e,n,t){if(n){const o=e._app,r=new OSjs.Applications.ApplicationSettings.SettingsItemDialog(o,o.__metadata,n,t);r._on("inited",function(e){r._find("List").clear().add(Object.keys(s).map(function(e,n){return{value:e,columns:[{icon:a.getIcon(s[e].Icon),label:i.format("{0} ({1})",s[e].Name,s[e].Description)}]}})),r._setTitle("Panel Items",!0)}),e._addChild(r,!0,!0)}}(e,t,function(n,t){e._toggleDisabled(!1),t&&(r.push({name:t.data}),u(e))})}),e._find("PanelButtonRemove").on("click",function(){const n=e._find("PanelItems").get("selected");n.length&&(r.splice(n[0].index,1),u(e))}),e._find("PanelButtonUp").on("click",function(){const n=e._find("PanelItems").get("selected");n.length&&d(e,n[0].index,-1)}),e._find("PanelButtonDown").on("click",function(){const n=e._find("PanelItems").get("selected");n.length&&d(e,n[0].index,1)}),e._find("PanelButtonReset").on("click",function(){const n=p.getDefaultSetting("panels");r=n[0].items,u(e)}),e._find("PanelButtonOptions").on("click",function(){const n=e._find("PanelItems").get("selected");n.length&&function(e,n){try{e.panels[0]._items[n].openSettings()}catch(e){}}(p,n[0].index)})},save:function(e,n,t,a){t.panels=t.panels||[{}],t.panels[0].options=t.panels[0].options||{},t.panels[0].options.position=e._find("PanelPosition").get("value"),t.panels[0].options.autohide=e._find("PanelAutoHide").get("value"),t.panels[0].options.ontop=e._find("PanelOntop").get("value"),t.panels[0].options.background=e._find("PanelBackgroundColor").get("value")||"#101010",t.panels[0].options.foreground=e._find("PanelForegroundColor").get("value")||"#ffffff",t.panels[0].options.opacity=e._find("PanelOpacity").get("value"),t.panels[0].items=r}}}),e("osjs-apps-settings/module-pm",[],function(){"use strict";const e=OSjs.require("core/dialog"),n=OSjs.require("core/settings-manager"),t=OSjs.require("core/package-manager"),a=OSjs.require("vfs/file");let i,o;function r(e,a){if(!e||e._destroyed)return;e._find("ButtonUninstall").set("disabled",!0),function(){const e=n.instance("PackageManager",{Hidden:[]});i=t.getPackages(!1),o=e.get("Hidden")}();const r=e._find("InstalledPackages"),s=Object.keys(i).map(function(e,n){return{index:n,value:e,columns:[{label:""},{label:e},{label:i[e].scope},{label:i[e].name}]}});r.clear(),r.add(s),r.$element.querySelectorAll("gui-list-view-body > gui-list-view-row").forEach(function(n){const t=n.children[0],a=n.getAttribute("data-value"),i=o.indexOf(a)>=0;e._create("gui-checkbox",{value:i},t).on("change",function(e){const n=o.indexOf(a);e.detail?n<0&&o.push(a):n>=0&&o.splice(n,1)})})}function s(e,t){if(!e||e._destroyed)return;const a=n.instance("PackageManager").get("PackagePaths",[]);e._find("PackagePaths").clear().add(a.map(function(e,n){return{value:n,columns:[{label:e}]}}))}function l(e,n,t,a){n._toggleLoading(!0),e.set(null,{PackagePaths:a},function(){s(n,t),n._toggleLoading(!1)},!1)}return{group:"misc",name:"Packages",label:"LBL_PACKAGES",icon:"apps/system-software-install.png",button:!1,init:function(){},update:function(e,n,t,a){r(e,n),s(e,n)},render:function(i,s,c,u,d){const g=n.instance("PackageManager",{Hidden:[]});i._find("ButtonUninstall").on("click",function(){const e=i._find("InstalledPackages").get("selected");if(e&&e[0]){const n=t.getPackage(e[0].data);if(n&&"user"===n.scope){i._toggleLoading(!0);const e=new a(n.path);t.uninstall(e).then(()=>{i._toggleLoading(!1),r(i,s)}).catch(e=>{i._toggleLoading(!1),alert(e)})}}}),i._find("InstalledPackages").on("select",function(e){let n=!0;const a=e.detail.entries||[];if(a.length){const e=t.getPackage(a[0].data);e&&"user"===e.scope&&(n=!1)}i._find("ButtonUninstall").set("disabled",n)}),i._find("ButtonSaveHidden").on("click",function(){i._toggleLoading(!0),g.set("Hidden",o,function(){i._toggleLoading(!1)})}),i._find("ButtonRegen").on("click",function(){i._toggleLoading(!0),t.generateUserMetadata().then(()=>{i._toggleLoading(!1),r(i,s)}).catch(()=>{i._toggleLoading(!1)})}),i._find("ButtonZipInstall").on("click",function(){i._toggleDisabled(!0),e.create("File",{filter:["application/zip"]},function(e,n,a){"ok"===n&&a?t.install(a,!0).then(()=>{i._toggleDisabled(!1),r(i,s)}).catch(e=>{i._toggleDisabled(!1),alert(e)}):i._toggleDisabled(!1)},i)}),i._find("PackagePathsRemove").on("click",function(){const e=i._find("PackagePaths").get("selected");e&&e.length&&function(e,t,a){const i=n.instance("PackageManager"),o=i.get("PackagePaths",[]);void 0!==o[a]&&(o.splice(a,1),l(i,e,t,o))}(i,s,e[0].data)}),i._find("PackagePathsAdd").on("click",function(){!function(t,a){const i=n.instance("PackageManager"),o=i.get("PackagePaths",[]);t._toggleDisabled(!0),e.create("Input",{message:"Enter path",placeholder:"mount:///path"},function(e,n,r){t._toggleDisabled(!1),r&&-1===o.indexOf(r)&&(o.push(r),l(i,t,a,o))})}(i,s)})},save:function(e,n,t,a){}}}),e("osjs-apps-settings/module-search",["./locales"],function(e){"use strict";const n=OSjs.require("core/settings-manager"),t=OSjs.require("gui/notification"),a=OSjs.require("core/locales"),i=OSjs.require("core/dialog"),o=OSjs.require("utils/misc"),r=a.createLocalizer(e);return{group:"system",name:"Search",label:"LBL_SEARCH",icon:"actions/system-search.png",init:function(){},update:function(e,t,a,i){const r=o.cloneObject(n.get("SearchEngine")||{});e._find("SearchEnableApplications").set("value",!0===r.applications),e._find("SearchEnableFiles").set("value",!0===r.files);const s=e._find("SearchPaths").clear();s.set("columns",[{label:"Path"}]);const l=(r.paths||[]).map(function(e){return{value:e,id:e,columns:[{label:e}]}});s.add(l)},render:function(e,n,t,a,o){e._find("SearchAdd").on("click",function(){e._toggleDisabled(!0),i.create("File",{select:"dir",mfilter:[function(e){return e.option("searchable")&&e.mounted()}]},function(n,t,a){e._toggleDisabled(!1),"ok"===t&&a&&e._find("SearchPaths").add([{value:a.path,id:a.path,columns:[{label:a.path}]}])},e)}),e._find("SearchRemove").on("click",function(){const n=e._find("SearchPaths");(n.get("value")||[]).forEach(function(e){n.remove(e.index)})})},save:function(e,a,i,o){const s=e._find("SearchPaths").get("entry",null,null,!0).sort(),l=[];s.forEach(function(e){const n=function(e){let n=!1;return l.forEach(function(t){n||(n=e.substr(0,t.length)===t)}),n}(e);n&&t.create({title:r("LBL_SEARCH"),message:r("Search path '{0}' is already handled by another entry",e)}),l.length&&n||l.push(e)});const c={applications:e._find("SearchEnableApplications").get("value"),files:e._find("SearchEnableFiles").get("value"),paths:l};n.instance("SearchEngine").set(null,c,!1,!1)}}}),e("osjs-apps-settings/module-sound",["./locales"],function(e){"use strict";const n=OSjs.require("core/theme"),t=OSjs.require("core/locales"),a=OSjs.require("core/dialog"),i=OSjs.require("utils/misc"),o=t.createLocalizer(e);let r={};function s(e,n){e._find("SoundsList").clear().add(Object.keys(r).map(function(e){return{value:{name:e,value:r[e]},columns:[{label:e},{label:r[e]}]}}))}return{group:"personal",name:"Sounds",label:"LBL_SOUNDS",icon:"status/audio-volume-high.png",init:function(){},update:function(e,n,t,a){e._find("SoundThemeName").set("value",t.soundTheme),e._find("EnableSounds").set("value",t.enableSounds),r=i.cloneObject(t.sounds),s(e,n)},render:function(e,t,i,l,c){const u=(d=n.getSoundThemes(),Object.keys(d).map(function(e){return{label:d[e],value:e}}));var d;e._find("SoundThemeName").add(u),e._find("SoundsEdit").on("click",function(){const n=e._find("SoundsList").get("selected");n&&n[0]&&function(e,n,t){e._toggleDisabled(!0),a.create("Input",{message:o("Enter filename for:")+" "+t.name,value:t.value},function(a,i,o){e._toggleDisabled(!1),(o=o||"").length&&(r[t.name]=o),s(e,n)})}(e,t,n[0].data)})},save:function(e,n,t,a){t.soundTheme=e._find("SoundThemeName").get("value"),t.enableSounds=e._find("EnableSounds").get("value"),r&&Object.keys(r).length&&(t.sounds=r)}}}),e("osjs-apps-settings/module-store",[],function(){"use strict";const e=OSjs.require("utils/fs"),n=OSjs.require("vfs/fs"),t=OSjs.require("vfs/file"),a=OSjs.require("core/package-manager");function i(e){e._toggleLoading(!0),a.getStorePackages({}).then(n=>{const t=n.map(function(e,n){const t=document.createElement("a");return t.href=e._repository,{index:n,value:e.download,columns:[{label:e.name},{label:t.hostname},{label:e.version},{label:e.author}]}});e._toggleLoading(!1);const a=e._find("AppStorePackages");return a&&a.clear().add(t),!0}).catch(n=>{console.warn(n),e._toggleLoading(!1)})}return{group:"user",name:"Store",label:"LBL_STORE",icon:"apps/system-software-update.png",button:!1,init:function(){},update:function(e,n,t,a,o){o&&i(e)},render:function(o,r,s,l,c){o._find("ButtonStoreRefresh").on("click",function(){i(o)}),o._find("ButtonStoreInstall").on("click",function(){const i=o._find("AppStorePackages").get("selected");i.length&&i[0].data&&(o._toggleLoading(!0),function(i,o){const r=new t(i,"application/zip");new Promise((o,s)=>{n.read(r).then(r=>{const l=new t({filename:e.filename(i),type:"file",path:"home:///"+e.filename(i),mime:"application/zip"});n.write(l,r).then(()=>a.install(l,!0).then(()=>{a.generateUserMetadata().then(o).catch(s)}).catch(e=>{s(new Error("Failed to install package: "+e))})).catch(s)}).catch(s)}).then(e=>o(!1,e)).catch(o)}(i[0].data,function(e,n){o._toggleLoading(!1),e&&alert(e)}))})},save:function(e,n,t,a){}}}),e("osjs-apps-settings/module-theme",["./locales"],function(e){"use strict";const n=OSjs.require("core/locales"),t=OSjs.require("core/dialog"),a=OSjs.require("vfs/file"),i=OSjs.require("core/theme"),o=n.createLocalizer(e);return{group:"personal",name:"Theme",label:"LBL_THEME",icon:"apps/preferences-desktop-wallpaper.png",watch:["CoreWM"],init:function(){},update:function(e,n,t,a){e._find("BackgroundImage").set("value",t.wallpaper),e._find("BackgroundColor").set("value",t.backgroundColor),e._find("FontName").set("value",t.fontFamily),e._find("StyleThemeName").set("value",t.styleTheme),e._find("IconThemeName").set("value",t.iconTheme),e._find("EnableTouchMenu").set("value",t.useTouchMenu),e._find("BackgroundStyle").set("value",t.background),e._find("BackgroundImage").set("value",t.wallpaper),e._find("BackgroundColor").set("value",t.backgroundColor)},render:function(e,n,r,s,l){function c(n,a,i){e._toggleDisabled(!0),t.create(n,a,function(n,t,a){e._toggleDisabled(!1),"ok"===t&&a&&i(a)},e)}var u;e._find("StyleThemeName").add(i.getStyleThemes().map(function(e){return{label:e.title,value:e.name}})),e._find("IconThemeName").add((u=i.getIconThemes(),Object.keys(u).map(function(e){return{label:u[e],value:e}}))),e._find("BackgroundImage").on("open",function(n){c("File",{mime:["^image"],file:new a(n.detail)},function(n){e._find("BackgroundImage").set("value",n.path)})}),e._find("BackgroundColor").on("open",function(n){c("Color",{color:n.detail},function(n){e._find("BackgroundColor").set("value",n.hex)})}),e._find("FontName").on("click",function(){c("Font",{fontName:s.fontFamily,fontSize:-1},function(n){e._find("FontName").set("value",n.fontName)})}),e._find("BackgroundStyle").add([{value:"image",label:o("LBL_IMAGE")},{value:"image-repeat",label:o("Image (Repeat)")},{value:"image-center",label:o("Image (Centered)")},{value:"image-fill",label:o("Image (Fill)")},{value:"image-strech",label:o("Image (Streched)")},{value:"color",label:o("LBL_COLOR")}])},save:function(e,n,t,a){t.styleTheme=e._find("StyleThemeName").get("value"),t.iconTheme=e._find("IconThemeName").get("value"),t.useTouchMenu=e._find("EnableTouchMenu").get("value"),t.wallpaper=e._find("BackgroundImage").get("value"),t.backgroundColor=e._find("BackgroundColor").get("value"),t.background=e._find("BackgroundStyle").get("value"),t.fontFamily=e._find("FontName").get("value")}}}),e("osjs-apps-settings/module-user",[],function(){"use strict";const e=OSjs.require("core/authenticator");return{group:"user",name:"User",label:"LBL_USER",icon:"apps/user-info.png",button:!1,init:function(){},update:function(n,t,a,i){const o=e.instance.getUser();n._find("UserID").set("value",o.id),n._find("UserName").set("value",o.name),n._find("UserUsername").set("value",o.username),n._find("UserGroups").set("value",o.groups)},render:function(e,n,t,a,i){},save:function(e,n,t,a){}}}),e("osjs-apps-settings/module-users",["./locales"],function(e){"use strict";const n=OSjs.require("core/locales"),t=OSjs.require("core/dialog"),a=OSjs.require("core/config"),i=OSjs.require("core/connection"),o=OSjs.require("core/window"),r=n.createLocalizer(e);function s(e,n){i.request("users",{command:"list"}).then(n=>{n instanceof Array&&e._find("UsersList").clear().add(n.map(function(e,n){return{value:e,columns:[{label:e.id},{label:e.username},{label:e.name}]}}))})}function l(e,n,a,l){if(e._toggleDisabled(!0),l)return void t.create("Input",{message:r("Set user password"),type:"password"},function(t,a,o){o?i.request("users",{command:"passwd",user:{password:o,id:l}}).then(()=>{e._toggleDisabled(!1),s(e,n)}).catch(n=>{e._toggleDisabled(!1),OSjs.error("Settings",r("Error while managing users"),n)}):e._toggleDisabled(!1)});const c=null===a?"add":"edit";a=a||{};const u=new o("SettingsUserWindow",{icon:e._app.__metadata.icon,title:e._app.__metadata.name,width:400,height:250},e._app);u._on("destroy",function(n){e._toggleDisabled(!1)}),u._on("init",function(t){n.render(u,u._name),Object.keys(a).length&&(u._find("UserUsername").set("value",a.username),u._find("UserName").set("value",a.name),u._find("UserGroups").set("value",(a.groups||[]).join(","))),u._find("ButtonClose").on("click",function(){u._close()}),u._find("ButtonOK").on("click",function(){a.username=u._find("UserUsername").get("value"),a.name=u._find("UserName").get("value")||a.username,a.groups=u._find("UserGroups").get("value").replace(/\s/g,"").split(","),a.username&&a.groups?i.request("users",{command:c,user:a}).then(()=>{s(e,n),u._close()}).catch(e=>{OSjs.error("Settings",r("Error while managing users"),e)}):u._close()})}),e._addChild(u,!0,!0)}return{group:"system",name:"Users",label:"LBL_USERS",icon:"apps/system-users.png",button:!1,compatible:function(){const e=a.getConfig("Connection.Authenticator");return-1===["demo","pam","shadow"].indexOf(e)},init:function(){},update:function(e,n,t,a){s(e,n)},render:function(e,n,t,a,o){function c(n,t){const a=e._find("UsersList").get("selected");if(a&&a.length){const e=a[0].data;e._username=e.username,n(e)}else t&&n(null)}e._find("UsersAdd").on("click",function(){l(e,n,null)}),e._find("UsersRemove").on("click",function(){c(function(t){!function(e,n,t){i.request("users",{command:"remove",user:t}).then(t=>{s(e,n)}).catch(e=>{OSjs.error("Settings",r("Error while managing users"),e)})}(e,n,t)})}),e._find("UsersEdit").on("click",function(){c(function(t){l(e,n,t)})}),e._find("UsersPasswd").on("click",function(){c(function(t){l(e,n,null,t.id)})})},save:function(e,n,t,a){}}}),e("osjs-apps-settings/module-vfs",[],function(){"use strict";const e=OSjs.require("core/settings-manager"),n=OSjs.require("core/mount-manager"),t=OSjs.require("core/authenticator"),a=OSjs.require("core/window"),i=OSjs.require("utils/misc"),o={WebDAV:{MountName:"owncloud",MountDescription:"OwnCloud",MountHost:"http://localhost/remote.php/webdav/",MountNamespace:"DAV:",MountUsername:function(){return t.instance.getUser().username}}};let r=[],s=[];function l(e,n,t,i){const r=new a("SettingsMountWindow",{icon:e._app.__metadata.icon,title:e._app.__metadata.name,width:400,height:440},e._app);return r._on("destroy",function(n){e._toggleDisabled(!1)}),r._on("inited",function(n){e._toggleDisabled(!0)}),r._on("init",function(e){function a(e){const n=o[e];n&&Object.keys(n).forEach(function(e){let t=n[e];"function"==typeof t&&(t=t()),r._find(e).set("value",t)})}n.render(r,r._name),t?(r._find("MountType").set("value",t.transport),r._find("MountName").set("value",t.name),r._find("MountDescription").set("value",t.description),t.options&&(r._find("MountHost").set("value",t.options.host),r._find("MountNamespace").set("value",t.options.ns),r._find("MountUsername").set("value",t.options.username),r._find("MountPassword").set("value",t.options.password),r._find("MountCORS").set("value",t.options.cors))):(a(r._find("MountType").get("value")),r._find("MountType").on("change",function(e){a(e.detail)})),r._find("ButtonClose").on("click",function(){r._close()}),r._find("ButtonOK").on("click",function(){i({transport:r._find("MountType").get("value"),name:r._find("MountName").get("value"),description:r._find("MountDescription").get("value"),options:{host:r._find("MountHost").get("value"),ns:r._find("MountNamespace").get("value"),username:r._find("MountUsername").get("value"),password:r._find("MountPassword").get("value"),cors:r._find("MountCORS").get("value")}},t),r._close()})}),e._addChild(r,!0,!0)}return{group:"system",name:"VFS",label:"VFS",icon:"devices/drive-harddisk.png",watch:["VFS"],init:function(e){},update:function(n,t,a,o){const r=i.cloneObject(e.get("VFS")||{}),s=r.scandir||{};n._find("ShowFileExtensions").set("value",!0===s.showFileExtensions),n._find("ShowHiddenFiles").set("value",!0===s.showHiddenFiles),function(n,t){const a=e.instance("VFS").get("mounts",[]).map(function(e,n){return{value:n,columns:[{label:e.name},{label:e.description}]}});n._find("MountList").clear().add(a)}(n)},render:function(n,t,a,i,o){function c(e,t){e&&(t&&r.push(t),s.push(e)),n.onButtonOK(),n.onModuleSelect(module.name)}n._find("MountList").set("columns",[{label:"Name"},{label:"Description"}]),n._find("MountRemove").on("click",function(){const t=n._find("MountList").get("selected");t instanceof Array&&t.forEach(function(t){const a=e.instance("VFS").get("mounts",[]),i=t.data;a[i]&&(r.push(a[i]),n.onButtonOK(),n.onModuleSelect(module.name))})}),n._find("MountAdd").on("click",function(){l(n,t,null,c)}),n._find("MountEdit").on("click",function(){const a=n._find("MountList").get("selected"),i=e.instance("VFS").get("mounts",[]);if(a&&a.length){const e=i[a[0].data];e&&l(n,t,e,c)}})},save:function(t,a,i,o){const l=e.instance("VFS"),c=l.get("mounts",[]).filter(function(e){for(let t=0;t<r.length;t++){const a=r[t].name;if(a===e.name)return n.remove(a),r.splice(t,1),!1}return!0});s.forEach(function(e){try{n.add(Object.assign({},e)),c.push(e)}catch(e){OSjs.error("Settings","An error occured while trying to mount",e),console.warn(e.stack,e)}});const u={mounts:c,scandir:{showHiddenFiles:t._find("ShowHiddenFiles").get("value"),showFileExtensions:t._find("ShowFileExtensions").get("value")}};l.set(null,u,!1,!1),s=[],r=[]}}}),e("osjs-apps-settings/scheme.html",[],function(){return'<application-window data-id="SettingsWindow">\r\n\r\n  <gui-vbox>\r\n    <gui-vbox-container data-grow="1" data-fill="true" data-id="ContainerSelection">\r\n    </gui-vbox-container>\r\n\r\n    <gui-vbox-container data-grow="1" data-fill="true" data-id="ContainerContent">\r\n      <gui-fragment data-fragment-external="module-desktop.html" />\r\n      <gui-fragment data-fragment-external="module-input.html" />\r\n      <gui-fragment data-fragment-external="module-locale.html" />\r\n      <gui-fragment data-fragment-external="module-panel.html" />\r\n      <gui-fragment data-fragment-external="module-pm.html" />\r\n      <gui-fragment data-fragment-external="module-store.html" />\r\n      <gui-fragment data-fragment-external="module-search.html" />\r\n      <gui-fragment data-fragment-external="module-sound.html" />\r\n      <gui-fragment data-fragment-external="module-theme.html" />\r\n      <gui-fragment data-fragment-external="module-user.html" />\r\n      <gui-fragment data-fragment-external="module-vfs.html" />\r\n      <gui-fragment data-fragment-external="module-users.html" />\r\n    </gui-vbox-container>\r\n\r\n    <gui-vbox-container data-shrink="1" data-align="end" data-id="ContainerButtons">\r\n      <gui-button-bar>\r\n        <gui-button data-id="ButtonOK">LBL_SAVE</gui-button>\r\n        <gui-button data-id="ButtonCancel">LBL_BACK</gui-button>\r\n      </gui-button-bar>\r\n    </gui-vbox-container>\r\n  </gui-vbox>\r\n\r\n</application-window>\r\n\r\n<application-window data-id="SettingsItemWindow">\r\n  <gui-vbox>\r\n    <gui-vbox-container data-grow="1" data-fill="true">\r\n      <gui-list-view data-id="List" data-multiple="false">\r\n      </gui-list-view>\r\n    </gui-vbox-container>\r\n\r\n    <gui-vbox-container data-shrink="1" data-align="end">\r\n      <gui-button-bar>\r\n        <gui-button data-id="ButtonItemOK">LBL_OK</gui-button>\r\n        <gui-button data-id="ButtonItemCancel">LBL_CANCEL</gui-button>\r\n      </gui-button-bar>\r\n    </gui-vbox-container>\r\n  </gui-vbox>\r\n</application-window>\r\n\r\n<application-window data-id="SettingsMountWindow">\r\n  <gui-vbox>\r\n    <gui-vbox-container data-grow="1" data-shrink="1" data-fill="true">\r\n\r\n      <gui-scroll-view>\r\n        <gui-vbox>\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_TYPE</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-select data-id="MountType">\r\n              <gui-select-option data-value="webdav">WebDAV (OwnCloud)</gui-select-option>\r\n            </gui-select>\r\n          </gui-vbox-container>\r\n\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_NAME</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-text data-id="MountName" data-placeholder="mydav"></gui-text>\r\n          </gui-vbox-container>\r\n\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_DESCRIPTION</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-text data-id="MountDescription" data-placeholder="My DAV"></gui-text>\r\n          </gui-vbox-container>\r\n\r\n\r\n          <gui-vbox-container data-grow="1">\r\n            <gui-expander data-label="LBL_SETTINGS" data-expanded="false">\r\n              <gui-vbox>\r\n                <gui-vbox-container data-shrink="1">\r\n                  <gui-label>LBL_HOST</gui-label>\r\n                </gui-vbox-container>\r\n                <gui-vbox-container data-expand="true">\r\n                  <gui-text data-id="MountHost" data-placeholder="http://127.0.0.1/remote.php/webdav/"></gui-text>\r\n                </gui-vbox-container>\r\n\r\n                <gui-vbox-container data-shrink="1">\r\n                  <gui-label>LBL_NAMESPACE</gui-label>\r\n                </gui-vbox-container>\r\n                <gui-vbox-container data-expand="true">\r\n                  <gui-text data-id="MountNamespace" data-placeholder="DAV"></gui-text>\r\n                </gui-vbox-container>\r\n\r\n                <gui-vbox-container data-shrink="1">\r\n                  <gui-label>LBL_USERNAME</gui-label>\r\n                </gui-vbox-container>\r\n                <gui-vbox-container data-expand="true">\r\n                  <gui-text data-id="MountUsername" data-placeholder="username"></gui-text>\r\n                </gui-vbox-container>\r\n\r\n                <gui-vbox-container data-shrink="1">\r\n                  <gui-label>LBL_PASSWORD</gui-label>\r\n                </gui-vbox-container>\r\n                <gui-vbox-container data-expand="true">\r\n                  <gui-password data-id="MountPassword" data-placeholder="password"></gui-password>\r\n                </gui-vbox-container>\r\n\r\n                <gui-vbox-container data-shrink="1">\r\n                  <gui-label>CORS Enabled</gui-label>\r\n                </gui-vbox-container>\r\n                <gui-vbox-container data-expand="true">\r\n                  <gui-switch data-id="MountCORS"></gui-switch>\r\n                </gui-vbox-container>\r\n              </gui-vbox>\r\n            </gui-expander>\r\n          </gui-vbox-container>\r\n\r\n        </gui-vbox>\r\n      </gui-scroll-view>\r\n    </gui-vbox-container>\r\n\r\n    <gui-vbox-container data-shrink="1" data-align="end">\r\n      <gui-button-bar>\r\n        <gui-button data-id="ButtonOK">LBL_SAVE</gui-button>\r\n        <gui-button data-id="ButtonClose">LBL_CLOSE</gui-button>\r\n      </gui-button-bar>\r\n    </gui-vbox-container>\r\n  </gui-vbox>\r\n\r\n</application-window>\r\n\r\n<application-window data-id="SettingsUserWindow">\r\n  <gui-vbox>\r\n    <gui-vbox-container data-grow="1" data-shrink="1" data-fill="true">\r\n\r\n      <gui-scroll-view>\r\n        <gui-vbox>\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_USERNAME</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-text data-id="UserUsername" data-placeholder="johndoe"></gui-text>\r\n          </gui-vbox-container>\r\n\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_NAME</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-text data-id="UserName" data-placeholder="John Doe"></gui-text>\r\n          </gui-vbox-container>\r\n\r\n          <gui-vbox-container data-shrink="1">\r\n            <gui-label>LBL_GROUPS</gui-label>\r\n          </gui-vbox-container>\r\n          <gui-vbox-container data-expand="true">\r\n            <gui-text data-id="UserGroups" data-placeholder="group1, group2, ..."></gui-text>\r\n          </gui-vbox-container>\r\n\r\n        </gui-vbox>\r\n      </gui-scroll-view>\r\n    </gui-vbox-container>\r\n\r\n    <gui-vbox-container data-shrink="1" data-align="end">\r\n      <gui-button-bar>\r\n        <gui-button data-id="ButtonOK">LBL_SAVE</gui-button>\r\n        <gui-button data-id="ButtonClose">LBL_CLOSE</gui-button>\r\n      </gui-button-bar>\r\n    </gui-vbox-container>\r\n  </gui-vbox>\r\n\r\n</application-window>\r\n'}),e("osjs-apps-settings/main",["./locales","./module-desktop","./module-input","./module-locale","./module-panel","./module-pm","./module-search","./module-sound","./module-store","./module-theme","./module-user","./module-users","./module-vfs","./scheme.html"],function(e,n,t,a,i,o,r,s,l,c,u,d,g,p){"use strict";const m=OSjs.require("core/locales"),f=OSjs.require("core/dialog"),h=OSjs.require("core/window"),b=OSjs.require("utils/events"),_=OSjs.require("core/theme"),v=OSjs.require("utils/misc"),S=OSjs.require("gui/menu"),k=OSjs.require("core/settings-manager"),w=OSjs.require("core/window-manager"),x=OSjs.require("core/application"),y=m.createLocalizer(e),I="misc",E={personal:{label:"LBL_PERSONAL"},system:{label:"LBL_SYSTEM"},user:{label:"LBL_USER"},misc:{label:"LBL_OTHER"}},O={theme:"Theme",desktop:"Desktop",panel:"Panel",user:"User",fileview:"VFS",search:"Search"};class L extends f{constructor(e,n,t,a){super("ApplicationSettingsGenericsWindow",{icon:n.icon,title:n.name,width:400,height:300,translator:y}),this.schemeRef=t,this.callback=a,this.closed=!1}init(e,n){const t=super.init(...arguments);return this.schemeRef.render(this,"SettingsItemWindow"),this._find("ButtonItemOK").on("click",()=>{this.closed=!0;const e=this._find("List").get("selected");this.callback("ok",e.length?e[0]:null),this._close()}),this._find("ButtonItemCancel").on("click",()=>this._close()),t}_close(){return this.closed||this.callback("cancel"),super._close(...arguments)}}class B extends h{constructor(e,n,t){super("ApplicationSettingsWindow",{icon:n.icon,title:n.name,width:500,height:450,allow_resize:!0,translator:y},e),this.initialCategory=t}init(e,n){const t=super.init(...arguments),a=w.instance;this.scheme=this._render("SettingsWindow",p),this._find("ButtonOK").son("click",this,this.onButtonOK),this._find("ButtonCancel").son("click",this,this.onButtonCancel);const i=document.createElement("div");i.className="ListView gui-generic-zebra-container gui-element";let o={},r=document.createDocumentFragment();return Object.keys(E).forEach(function(e){const n=document.createElement("ul"),t=document.createElement("span"),a=document.createElement("div");a.className="gui-generic-double-padded",t.appendChild(document.createTextNode(y(E[e].label))),o[e]=n,a.appendChild(t),a.appendChild(n),i.appendChild(a)}),n.modules.forEach(e=>{if(("function"!=typeof e.compatible||e.compatible())&&o[e.group]){const n=document.createElement("img");n.setAttribute("src",_.getIcon(e.icon,"32x32")),n.setAttribute("title",e.name);const i=document.createElement("span");i.appendChild(document.createTextNode(y(e.label||e.name)));const s=document.createElement("li");s.className="gui-generic-hoverable",s.setAttribute("data-module",String(e.name)),s.appendChild(n),s.appendChild(i),o[e.group].appendChild(s);const l=t.querySelector('[data-module="'+e.name+'"]');l?l.className="gui-generic-padded":console.warn("Not found",e.name);const c=v.cloneObject(a.getSettings());try{e.render(this,this.scheme,r,c,a)}catch(e){console.warn(e,e.stack)}try{e.update(this,this.scheme,c,a)}catch(e){console.warn(e,e.stack)}e._inited=!0}}),Object.keys(o).forEach(e=>{o[e].children.length||(o[e].parentNode.style.display="none")}),b.$bind(i,"click",e=>{const n=e.isTrusted?e.target:e.relatedTarget||e.target;if(S.blur(),n&&"LI"===n.tagName&&n.hasAttribute("data-module")){e.preventDefault();const t=n.getAttribute("data-module");this.onModuleSelect(t)}},!0),t.querySelector('[data-id="ContainerSelection"]').appendChild(i),o={},r=null,this.initialCategory&&this.onExternalAttention(this.initialCategory),t}destroy(){return!!super.destroy(...arguments)&&(this.currentModule=null,!0)}onModuleSelect(e){const n=w.instance,t=this._$element;function a(e){t.querySelector('[data-id="ContainerSelection"]').style.display=e?"block":"none",t.querySelector('[data-id="ContainerContent"]').style.display=e?"none":"block",t.querySelector('[data-id="ContainerButtons"]').style.display=e?"none":"block"}let i,o;if(t.querySelectorAll("div[data-module]").forEach(function(e){e.style.display="none"}),a(!0),this._setTitle(null),e&&this._app.modules.forEach(function(n){i||n.name!==e||(i=n)}),i){const e=t.querySelector('div[data-module="'+i.name+'"]');if(e){e.style.display="block",o=v.cloneObject(n.getSettings());try{i.update(this,this.scheme,o,n,!0)}catch(e){console.warn(e,e.stack)}a(!1),this._setTitle(y(i.name),!0),!1===i.button?this._find("ButtonOK").hide():this._find("ButtonOK").show()}}else e||(o=v.cloneObject(n.getSettings()),this._app.modules.forEach(e=>{try{e._inited&&e.update(this,this.scheme,o,n)}catch(e){console.warn(e,e.stack)}}));this._app.setModule(i)}onButtonOK(){const e={},n=w.instance;this._app.modules.forEach(t=>{if(t._inited){const a=t.save(this,this.scheme,e,n);"function"==typeof a&&a()}}),this._toggleLoading(!0),this._app.saveSettings(e,()=>{this._toggleLoading(!1)})}onButtonCancel(){this.onModuleSelect(null)}onExternalAttention(e){this.onModuleSelect(O[e]||e),this._focus()}}OSjs.Applications.ApplicationSettings=Object.seal(class extends x{constructor(e,n){super("ApplicationSettings",e,n);const t=OSjs.Applications.ApplicationSettings.Modules;this.watches={},this.currentModule=null,this.modules=Object.keys(t).map(function(e){const n=v.argumentDefaults(t[e],{_inited:!1,name:e,group:I,icon:"status/error.png",init:function(){},update:function(){},render:function(){},save:function(){}});return-1===Object.keys(E).indexOf(n.group)&&(n.group=I),Object.keys(n).forEach(function(e){"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),n}),this.modules.forEach(e=>{e.init(this),e.watch&&e.watch instanceof Array&&e.watch.forEach(n=>{this.watches[e.name]=k.watch(n,()=>{const n=this._getMainWindow();e&&n&&this.currentModule&&this.currentModule.name===e.name&&n.onModuleSelect(e.name)})})})}destroy(){return!!super.destroy(...arguments)&&(Object.keys(this.watches).forEach(e=>{k.unwatch(this.watches[e])}),this.watches={},!0)}init(e,n){super.init(...arguments);const t=this._getArgument("category")||e.category,a=this._addWindow(new B(this,n,t));this._on("attention",function(e){a&&e.category&&a.onExternalAttention(e.category)})}saveSettings(e,n){const t=w.instance;t.applySettings(e,!1,1),k.save().then(e=>n(!1,e)).catch(n)}setModule(e){this.currentModule=e}static get SettingsItemDialog(){return L}static get Modules(){return{Desktop:n,Input:t,Locale:a,Panel:i,PM:o,Search:r,Sounds:s,Store:l,Theme:c,User:u,Users:d,VFS:g}}})}),e("osjs-apps-settings",["osjs-apps-settings/main"],function(e){return e})}(t),!a){var r=require("skylark-langx/skylark");i?module.exports=r:n.skylarkjs=r}}(0,this);
//# sourceMappingURL=sourcemaps/osjs-apps-settings.js.map
