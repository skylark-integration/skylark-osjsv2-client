/**
 * osjs-apps-writer - 
 * @author 
 * @version v1.0.0
 * @link 
 * @license 
 */
!function(n,t){var e=t.define,require=t.require,r="function"==typeof e&&e.amd,i=!r&&"undefined"!=typeof exports;if(!r&&!e){var a={};e=t.define=function(n,t,e){"function"==typeof e?(a[n]={factory:e,deps:t.map(function(t){return function(n,t){if("."!==n[0])return n;var e=t.split("/"),r=n.split("/");e.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?e.pop():e.push(r[i]));return e.join("/")}(t,n)}),resolved:!1,exports:null},require(n)):a[n]={factory:null,resolved:!0,exports:e}},require=t.require=function(n){if(!a.hasOwnProperty(n))throw new Error("Module "+n+" has not been defined");var module=a[n];if(!module.resolved){var e=[];module.deps.forEach(function(n){e.push(require(n))}),module.exports=module.factory.apply(t,e)||null,module.resolved=!0}return module.exports}}if(!e)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(n,require){n("osjs-apps-writer/locales",[],function(){"use strict";return{bg_BG:{"Insert URL":"Въведи URL"},de_DE:{"Insert URL":"URL einfügen"},es_ES:{"Insert URL":"Insertar URL"},fr_FR:{"Insert URL":"Insérer une URL"},ar_DZ:{"Insert URL":"أدخل رابط"},it_IT:{"Insert URL":"Inserisci URL"},ko_KR:{"Insert URL":"링크 삽입"},nl_NL:{"Insert URL":"URL invoegen"},no_NO:{"Insert URL":"Sett inn URL"},pl_PL:{"Insert URL":"Wpisz URL"},ru_RU:{"Insert URL":"Вставить ссылку"},sk_SK:{"Insert URL":"Vložiť URL"},tr_TR:{"Insert URL":"URL ekle"},vi_VN:{"Insert URL":"Thêm URL"}}}),n("osjs-apps-writer/scheme.html",[],function(){return'<application-window data-id="WriterWindow">\r\n\r\n  <gui-vbox>\r\n    \x3c!-- MENU BAR --\x3e\r\n    <gui-vbox-container data-grow="0" data-shrink="1" data-basis="auto">\r\n      <gui-menu-bar>\r\n\r\n        <gui-menu-bar-entry data-label="LBL_FILE">\r\n          <gui-menu data-id="SubmenuFile">\r\n            <gui-menu-entry data-id="MenuNew" data-label="LBL_NEW"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuOpen" data-label="LBL_OPEN"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuSave" data-label="LBL_SAVE"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuSaveAs" data-label="LBL_SAVEAS"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuClose" data-label="LBL_CLOSE"></gui-menu-entry>\r\n          </gui-menu>\r\n        </gui-menu-bar-entry>\r\n\r\n        <gui-menu-bar-entry data-label="LBL_EDIT">\r\n          <gui-menu data-id="SubmenuEdit">\r\n            <gui-menu-entry data-id="MenuUndo" data-label="LBL_UNDO"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuRedo" data-label="LBL_REDO"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuCut" data-label="LBL_CUT"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuCopy" data-label="LBL_COPY"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuPaste" data-label="LBL_PASTE"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuDelete" data-label="LBL_DELETE"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuUnlink" data-label="LBL_UNLINK"></gui-menu-entry>\r\n          </gui-menu>\r\n        </gui-menu-bar-entry>\r\n\r\n        <gui-menu-bar-entry data-label="LBL_INSERT">\r\n          <gui-menu data-id="SubmenuInsert">\r\n            <gui-menu-entry data-id="MenuInsertOL" data-label="LBL_ORDERED_LIST"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuInsertUL" data-label="LBL_UNORDERED_LIST"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuInsertLink" data-label="LBL_LINK"></gui-menu-entry>\r\n            <gui-menu-entry data-id="MenuInsertImage" data-label="LBL_IMAGE"></gui-menu-entry>\r\n          </gui-menu>\r\n        </gui-menu-bar-entry>\r\n\r\n      </gui-menu-bar>\r\n    </gui-vbox-container>\r\n\r\n    \x3c!-- TOOLS --\x3e\r\n    <gui-vbox-container data-shrink="1" data-basis="auto" data-expand="true">\r\n\r\n      <gui-toolbar>\r\n        <gui-button data-id="text-bold" data-icon="stock://actions/format-text-bold.png"></gui-button>\r\n        <gui-button data-id="text-italic" data-icon="stock://actions/format-text-italic.png"></gui-button>\r\n        <gui-button data-id="text-underline" data-icon="stock://actions/format-text-underline.png"></gui-button>\r\n        <gui-button data-id="text-strikethrough" data-icon="stock://actions/format-text-strikethrough.png"></gui-button>\r\n\r\n        <gui-toolbar-separator />\r\n\r\n        <gui-button data-id="justify-left" data-icon="stock://actions/format-justify-left.png"></gui-button>\r\n        <gui-button data-id="justify-center" data-icon="stock://actions/format-justify-center.png"></gui-button>\r\n        <gui-button data-id="justify-right" data-icon="stock://actions/format-justify-right.png"></gui-button>\r\n\r\n        <gui-toolbar-separator />\r\n\r\n        <gui-button data-id="indent" data-icon="stock://actions/format-indent-less.png"></gui-button>\r\n        <gui-button data-id="unindent" data-icon="stock://actions/format-indent-more.png"></gui-button>\r\n\r\n        <gui-toolbar-separator />\r\n\r\n        <gui-color-box data-id="Foreground"></gui-color-box>\r\n        <gui-color-box data-id="Background"></gui-color-box>\r\n\r\n        <gui-toolbar-separator />\r\n\r\n        <gui-button data-id="Font" data-group="tool" data-tool-name="">FONT (SIZE)</gui-button>\r\n      </gui-toolbar>\r\n\r\n    </gui-vbox-container>\r\n\r\n    \x3c!-- CONTENT --\x3e\r\n    <gui-vbox-container data-grow="1" data-shrink="0" data-basis="auto" data-fill="true">\r\n      <gui-richtext data-id="Text"></gui-richtext>\r\n    </gui-vbox-container>\r\n\r\n    \x3c!-- STATUSBAR --\x3e\r\n    \x3c!--\r\n    <gui-vbox-container data-grow="0" data-shrink="1" data-basis="auto">\r\n      <gui-statusbar data-id="Statusbar"></gui-statusbar>\r\n    </gui-vbox-container>\r\n    --\x3e\r\n\r\n  </gui-vbox>\r\n\r\n\r\n\r\n</application-window>\r\n'}),n("osjs-apps-writer/main",["./locales","./scheme.html"],function(n,t){"use strict";const e=OSjs.require("vfs/fs"),r=OSjs.require("core/config"),i=OSjs.require("core/dialog"),a=OSjs.require("gui/element"),o=OSjs.require("utils/misc"),u=OSjs.require("core/locales"),s=OSjs.require("helpers/default-application"),d=OSjs.require("helpers/default-application-window"),c=u.createLocalizer(n);class l extends d{constructor(n,t,e){const i=r.getConfig();super("ApplicationWriterWindow",{allow_drop:!0,icon:t.icon,title:t.name,width:550,height:400,translator:c},n,e),this.checkChangeLength=-1,this.checkChangeInterval=null,this.color={background:"#ffffff",foreground:"#000000"},this.font={name:i.Fonts.default,size:3}}destroy(){this.checkChangeInterval=clearInterval(this.checkChangeInterval),super.destroy(...arguments)}init(n,r){const u=super.init(...arguments);var s=this;this._render("WriterWindow",t);var d=this._find("Text"),l={"text-bold":{command:"bold"},"text-italic":{command:"italic"},"text-underline":{command:"underline"},"text-strikethrough":{command:"strikeThrough"},"justify-left":{command:"justifyLeft"},"justify-center":{command:"justifyCenter"},"justify-right":{command:"justifyRight"},indent:{command:"indent"},unindent:{command:"outdent"}},g={MenuUndo:function(){d.command("undo",!1)},MenuRedo:function(){d.command("redo",!1)},MenuCopy:function(){d.command("copy",!1)},MenuCut:function(){d.command("cut",!1)},MenuDelete:function(){d.command("delete",!1)},MenuPaste:function(){d.command("paste",!1)},MenuUnlink:function(){d.command("unlink",!1)},MenuInsertOL:function(){d.command("insertOrderedList",!1)},MenuInsertUL:function(){d.command("insertUnorderedList",!1)},MenuInsertImage:function(){i.create("File",{filter:["^image"]},function(n,t,r){"ok"===t&&r&&e.url(r).then(n=>{d.command("insertImage",!1,n)})},s)},MenuInsertLink:function(){i.create("Input",{message:c("Insert URL"),placeholder:"https://os-js.org"},function(n,t,e){"ok"===t&&e&&d.command("createLink",!1,e)},s)}};function m(n){g[n.detail.id]&&g[n.detail.id]()}function f(n,t){s._toggleDisabled(!0),i.create("Color",{color:n},function(n,e,r){s._toggleDisabled(!1),"ok"===e&&r&&t(r.hex)},s)}this._find("SubmenuEdit").on("select",m),this._find("SubmenuInsert").on("select",m);var h=this._find("Background").on("click",function(){f(s.color.background,function(n){d.command("hiliteColor",!1,n),s.color.background=n,h.set("value",n)})}),b=this._find("Foreground").on("click",function(){f(s.color.foreground,function(n){d.command("foreColor",!1,n),s.color.foreground=n,b.set("value",n)})}),p=this._find("Font").on("click",function(){var n;n=function(n){d.command("fontName",!1,n.fontName),d.command("fontSize",!1,n.fontSize),s.font.name=n.fontName,s.font.size=n.fontSize},s._toggleDisabled(!0),i.create("Font",{fontSize:s.font.size,fontName:s.font.name,minSize:1,maxSize:8,unit:"null"},function(t,e,r){s._toggleDisabled(!1),"ok"===e&&r&&n(r)},s)});function L(){var n=function(){function n(n){return d.query(n)}var t={fontName:(n("fontName")||"").split(",")[0].replace(/^'/,"").replace(/'$/,""),fontSize:parseInt(n("fontSize"),10)||s.font.size,foreColor:n("foreColor"),hiliteColor:n("hiliteColor")};return Object.keys(l).forEach(function(e){var r=l[e];t[r.command]={button:e,value:n(r.command)}}),t}();!function(n){h.set("value",n.hiliteColor),b.set("value",n.foreColor),n.fontName&&p.set("label",o.format("{0} ({1})",n.fontName,n.fontSize.toString()))}(n)}return u.querySelectorAll("gui-toolbar > gui-button").forEach(function(n){var t=n.getAttribute("data-id"),e=l[t];e&&a.createFromNode(n).on("click",function(){d.command(e.command)}).on("mousedown",function(n){n.preventDefault()})}),h.set("value",this.color.background),b.set("value",this.color.foreground),p.set("label",o.format("{0} ({1})",this.font.name,this.font.size.toString())),d.on("selection",function(){L()}),this.checkChangeInterval=setInterval(function(){if(!s.hasChanged){s.checkChangeLength<0&&(s.checkChangeLength=d.get("value").length);var n=d.get("value").length;n!==s.checkChangeLength&&(s.hasChanged=!0),s.checkChangeLength=n}},500),u}updateFile(n){d.prototype.updateFile.apply(this,arguments);try{var t=this._find("Text");t.$element.focus()}catch(n){}this.checkChangeLength=-1}showFile(n,t){this._find("Text").set("value",t||""),d.prototype.showFile.apply(this,arguments)}getFileData(){return this._find("Text").get("value")}_focus(n,t){return!!super._focus(...arguments)&&(this._find("Text").focus(),!0)}}OSjs.Applications.ApplicationWriter=class extends s{constructor(n,t){super("ApplicationWriter",n,t,{extension:"odoc",mime:"osjs/document",filename:"New text file.odoc"})}init(n,t){super.init(...arguments);const e=this._getArgument("file");this._addWindow(new l(this,t,e))}}}),n("osjs-apps-writer",["osjs-apps-writer/main"],function(n){return n})}(e),!r){var o=require("skylark-langx/skylark");i?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/osjs-apps-writer.js.map
