/**
 * osjs-apps-musicplayer - 
 * @author 
 * @version v1.0.0
 * @link 
 * @license 
 */
!function(e,i){var t=i.define,require=i.require,o="function"==typeof t&&t.amd,a=!o&&"undefined"!=typeof exports;if(!o&&!t){var r={};t=i.define=function(e,i,t){"function"==typeof t?(r[e]={factory:t,deps:i.map(function(i){return function(e,i){if("."!==e[0])return e;var t=i.split("/"),o=e.split("/");t.pop();for(var a=0;a<o.length;a++)"."!=o[a]&&(".."==o[a]?t.pop():t.push(o[a]));return t.join("/")}(i,e)}),resolved:!1,exports:null},require(e)):r[e]={factory:null,resolved:!0,exports:t}},require=i.require=function(e){if(!r.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=r[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(i,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("osjs-apps-musicplayer/locales",[],function(){"use strict";return{bg_BG:{Playlist:"Плейлист","Playback aborted":"Прекратено изпълнение","Network or communication error":"Проблем с връзка към мрежа","Decoding failed. Corruption or unsupported media":"Провалено декодиране, повереден файл или неподдържан формат","Media source not supported":"Източника на медия не се поддържа","Failed to play file":"Изпълнението на файла се провали",Artist:"Изпълнител",Album:"Албум",Track:"Песен",Time:"Време","Media information query failed":"Получаване на информация провалено","seek unavailable in format":"Невъществуващ формат","The audio type is not supported: {0}":"Аудио формата не се поддържа"},de_DE:{Playlist:"Wiedergabeliste","Playback aborted":"Wiedergabe abgebrochen","Network or communication error":"Netzwerk Kommunikationsfehler","Decoding failed. Corruption or unsupported media":"Dekodierung gescheitert. Fehlerhafte oder nicht unterstützte Datei","Media source not supported":"Medienquelle nicht unterstützt","Failed to play file":"Wiedergabe der Datei gescheitert",Artist:"Künstler",Album:"Album",Track:"Titel",Time:"Zeit","Media information query failed":"Media Informationssuche gescheitert","seek unavailable in format":"Spulen im Format nicht verfügbar","The audio type is not supported: {0}":"Der Audio-Typ {0} ist nicht unterstützt"},es_ES:{Playlist:"Lista de reproducción","Playback aborted":"Playback anulado","Network or communication error":"Error de red o de comunicación","Decoding failed. Corruption or unsupported media":"Fallo en el desentrelazado. Medio corrupto o no soportado","Media source not supported":"Medio no soportado","Failed to play file":"Error reproduciendo archivo",Artist:"Artista",Album:"Album",Track:"Pista",Time:"Tiempo","Media information query failed":"Error recupersqndo información del medio","seek unavailable in format":"búsqueda no disponible en este formato","The audio type is not supported: {0}":"El tipo de audio no está soportado: {0}"},fr_FR:{Playlist:"Liste de lecture","Playback aborted":"Lecture interrompue","Network or communication error":"Erreur de communication ou de réseau","Decoding failed. Corruption or unsupported media":"Décodage raté. Média corrompus ou non pris en charge","Media source not supported":"Source de médias non pris en charge","Failed to play file":"Impossible de lire le fichier",Artist:"Artiste",Album:"Album",Track:"Piste",Time:"Durée","Media information query failed":"Requête des informations média échoué","seek unavailable in format":"recherche indisponible dans ce format","The audio type is not supported: {0}":"Le type audio n'est pas pris en charge: {0}"},ar_DZ:{Playlist:"قائمة القرائة","Playback aborted":"قطع التشغيل","Network or communication error":"خطأ في الإتصال بالشبكة","Decoding failed. Corruption or unsupported media":"فشل في فك التشفير. وسائط غير صالحة أو غير مدعومة","Media source not supported":"وسائط غير مدعومة","Failed to play file":"لايمكن قراءة الملف",Artist:"الفنان",Album:"الألبوم",Track:"المقطع",Time:"المدة","Media information query failed":"خطأ في قراءة معلومات الوسائط","seek unavailable in format":"بحث غير ممكن في هذا النوع","The audio type is not supported: {0}":"نوع الملف الصوتي غير مدعوم: {0}"},it_IT:{Playlist:"Playlist","Playback aborted":"Riproduzione terminata","Network or communication error":"Errore di rete o di comunicazione","Decoding failed. Corruption or unsupported media":"Decodifica fallita. Supporto corroto o non supportato.","Media source not supported":"Sorgente multimediale non supportata","Failed to play file":"Riproduzione file fallita",Artist:"Artista",Album:"Album",Track:"Traccia",Time:"Tempo","Media information query failed":"Recupero informazioni media fallita","seek unavailable in format":"ricerca non disponibile nel formato","The audio type is not supported: {0}":"Tipo di audio non supportato: {0}"},ko_KR:{Playlist:"재생목록","Playback aborted":"일시중지","Network or communication error":"네트워크 등 통신 문제가 발생했습니다","Decoding failed. Corruption or unsupported media":"디코딩에 실패했습니다. 손상되었거나 지원하지 않는 형식입니다","Media source not supported":"지원하지 않는 미디어 소스입니다","Failed to play file":"파일을 재생하는데 실패했습니다",Artist:"아티스트",Album:"앨범",Track:"트랙",Time:"시간","Media information query failed":"미디어 정보 조회에 실패했습니다","seek unavailable in format":"탐색을 지원하지 않는 형식입니다","The audio type is not supported: {0}":"이 오디오 형식은 지원하지 않습니다: {0}"},nl_NL:{Playlist:"Afspeellijst","Playback aborted":"Afspelen afgebroken","Network or communication error":"Netwerk of communicatie fout","Decoding failed. Corruption or unsupported media":"Decoderen mislukt: bestandstype wordt niet ondersteund","Media source not supported":"Mediabron wordt niet ondersteund","Failed to play file":"Afspelen van bestand mislukt",Artist:"Artiest",Album:"Album",Track:"Nummer",Time:"Tijd","Media information query failed":"Zoeken naar media is niet gelukt","seek unavailable in format":"Voor/achteruit spoelen is niet beschikbaar in dit formaat","The audio type is not supported: {0}":"Audio type {0} wordt niet ondersteund"},no_NO:{Playlist:"Spilleliste","Playback aborted":"Avspilling avbrutt","Network or communication error":"Nettverks- eller kommunikasjonsfeil","Decoding failed. Corruption or unsupported media":"Dekoding feilet. Korrupt eller ustøttet media","Media source not supported":"Media-kilde ikke støttet","Failed to play file":"Klarte ikke spille av fil",Artist:"Artist",Album:"Album",Track:"Låt",Time:"Tid","Media information query failed":"Media-informasjon forespursel feil","seek unavailable in format":"spoling utilgjenglig i format","The audio type is not supported: {0}":"Denne lyd-typen er ikke støttet: {0}"},pl_PL:{Playlist:"Playlista","Playback aborted":"Odtwarzanie Przerwane","Network or communication error":"Błąd Sieci lub Komunikacji","Decoding failed. Corruption or unsupported media":"Dekodowanie nie powiodło się. Uszkodzony lub nieobsługiwany plik","Media source not supported":"Plik nie jest wspierany","Failed to play file":"Nie można odtworzyć pliku",Artist:"Artysta",Album:"Album",Track:"Ścieżka",Time:"Czas","Media information query failed":"Brak informacji","seek unavailable in format":"Przewijanie nie jest obsługiwane w tym formacie","The audio type is not supported: {0}":"Ten typ audio nie jest obsługiwany: {0}"},ru_RU:{Playlist:"Список воспроизведения","Playback aborted":"Воспроизведение прервано","Network or communication error":"Ошибка соединения","Decoding failed. Corruption or unsupported media":"Не удалось декодировать файл. Файл поврежден или данынй формат не поддерживается","Media source not supported":"Тип файла не поддерживается","Failed to play file":"Ошибка воспроизведения",Artist:"Артист",Album:"Альбом",Track:"Трек",Time:"Время","Media information query failed":"Ошибка в запросе медиа-информации","seek unavailable in format":"Перемотка недоступна в этом формате","The audio type is not supported: {0}":"Тип аудио не поддерживается: {0}"},sk_SK:{Playlist:"Zoznam skladieb","Playback aborted":"Prehrávanie prerušené","Network or communication error":"Chyba v sieťovej komunikácii","Decoding failed. Corruption or unsupported media":"Dekódovanie sa nepodarilo alebo médium je nepodporované","Media source not supported":"Zdrojové médium nie je podporované","Failed to play file":"Chyba pri prehrávaní súboru",Artist:"Umelec",Album:"Album",Track:"Skladba",Time:"Čas","Media information query failed":"Chyba pri získavaní informácii o médiu","seek unavailable in format":"Formát média nepodporuje preskakovanie (seek)","The audio type is not supported: {0}":"Nepodporovaný formát: {0}"},tr_TR:{Playlist:"Oynatma listesi","Playback aborted":"kayıt çalma/dinleme durduruldu","Network or communication error":"ağ veya iletişim hatası","Decoding failed. Corruption or unsupported media":"çözümleme hatası. Bozuk veya çalışmıyor.","Media source not supported":"medya kaynağı bulunamadı","Failed to play file":"Oynatma hatası",Artist:"Artist",Album:"Album",Track:"Parça",Time:"zaman","Media information query failed":"medya bilgisini elde etmede hata oluştu","seek unavailable in format":"bu formatta ileri saramazsınız","The audio type is not supported: {0}":"Bu format desteklenmiyor: {0}"},vi_VN:{Playlist:"Danh sách phát","Playback aborted":"Phát lại bị hủy","Network or communication error":"Mạng hoặc thông tin liên lạc bị lỗi","Decoding failed. Corruption or unsupported media":"Giải mã thất bại. Tập tin bị hỏng hoặc không được hỗ trợ","Media source not supported":"Nguồn phương tiện không được hỗ trợ","Failed to play file":"Không thể chơi tập tin",Artist:"Ca sĩ",Album:"Album",Track:"Bài hát",Time:"Thời gian","Media information query failed":"Truy vấn thông tin tập tin thất bại","seek unavailable in format":"không tua được trong định dạng này","The audio type is not supported: {0}":"Loại âm thanh {0} không được hỗ trợ"}}}),e("osjs-apps-musicplayer/main",["./locales"],function(e){"use strict";const i=OSjs.require("utils/fs"),t=OSjs.require("utils/misc"),o=OSjs.require("core/locales"),a=OSjs.require("core/dialog"),r=OSjs.require("vfs/file"),n=OSjs.require("helpers/default-application"),s=OSjs.require("helpers/default-application-window"),l=o.createLocalizer(e);function d(e){var i=Math.floor(e/3600),t=Math.floor((e-3600*i)/60),o=Math.floor(e-3600*i-60*t);return t<10&&(t="0"+t),o<10&&(o="0"+o),t+":"+o}class u extends s{constructor(e,i,t){super("ApplicationMusicPlayerWindow",{icon:i.icon,title:i.name,auto_size:!0,allow_drop:!0,allow_resize:!1,allow_maximize:!1,width:370,height:260,translator:l},e,t),this.updated=0,this.seeking=!1}init(e,i){const t=super.init(...arguments);var r=this;this._render("MusicPlayerWindow",require("osjs-scheme-loader!./scheme.html"));var n=this._find("LabelTime"),s=this._find("Seek"),d=this._find("Player"),u=d.$element.firstChild;this._find("ButtonStart").set("disabled",!0),this._find("ButtonRew").set("disabled",!0);var p=this._find("ButtonPlay").set("disabled",!0).on("click",function(){u.play()}),c=this._find("ButtonPause").set("disabled",!0).on("click",function(){u.pause()});return this._find("ButtonFwd").set("disabled",!0),this._find("ButtonEnd").set("disabled",!0),s.on("change",function(e){if(r.seeking=!1,u&&!u.paused)try{u.pause(),e&&(u.currentTime=e.detail||0),u.play()}catch(e){}}),d.on("play",function(e){s.set("disabled",!1),c.set("disabled",!1),p.set("disabled",!0)}),d.on("ended",function(e){s.set("disabled",!0),c.set("disabled",!0)}),d.on("pause",function(e){s.set("disabled",!0),c.set("disabled",!1),p.set("disabled",!1)}),d.on("loadeddata",function(e){}),d.on("timeupdate",function(e){r.updateTime(n,s)}),d.on("error",function(e){if(d.$element.src){var i=null;try{switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:i=l("Playback aborted");break;case e.target.error.MEDIA_ERR_NETWORK:i=l("Network or communication error");break;case e.target.error.MEDIA_ERR_DECODE:i=l("Decoding failed. Corruption or unsupported media");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:i=l("Media source not supported");break;default:i=o._("ERR_APP_UNKNOWN_ERROR")}}catch(e){i=o._("ERR_GENERIC_APP_FATAL_FMT",e)}i&&a.create("Alert",{title:r._title,message:i},null,r)}}),t}showFile(e,t){if(e&&t){var o=this,a=this._find("Player"),r=this._find("Seek"),n=a.$element.firstChild;r.on("mousedown",function(){o.seeking=!0}),r.on("mouseup",function(){o.seeking=!1});var s=e?e.filename:"",l=e?i.dirname(e.path):"",d=this._find("LabelArtist").set("value",""),u=this._find("LabelTitle").set("value",s),p=this._find("LabelAlbum").set("value",l);this._find("LabelTime").set("value",""),r.set("min",0),r.set("max",0),r.set("value",0),this.updated=0,this.seeking=!1,n.src=t||"",n.play(),o._app._api("info",{filename:e.path}).then(e=>{e&&(e.Artist&&d.set("value",e.Artist),e.Album&&p.set("value",e.Album),e.Title&&u.set("value",e.Track))})}}updateTime(e,i){if(!this._destroyed){var o=this._find("Player"),a=o.$element.firstChild,r=a.duration,n=a.currentTime,s=!1;!isNaN(n)&&isFinite(n)||(n=0),!isNaN(r)&&isFinite(r)||(r=n,s=!0);var l=t.format("{0} / {1}",d(n),s?"<unknown>":d(r));this.updated<2?(i.set("min",0),i.set("max",r)):this.updated++,e.set("value",l),this.seeking||i.set("value",n)}}}OSjs.Applications.ApplicationMusicPlayer=class extends n{constructor(e,i){super("ApplicationMusicPlayer",e,i,{readData:!1})}init(e,i){super.init(...arguments);const t=this._getArgument("file");this._addWindow(new u(this,i,t))}_onMessage(e,i,t){if(super._onMessage(...arguments),"attention"===e&&i&&i.file){var o=this._getMainWindow();this.openFile(new r(i.file),o)}}}}),e("osjs-apps-musicplayer",["osjs-apps-musicplayer/main"],function(e){return e})}(t,require),!o){var n=require("skylark-langx/skylark");a?module.exports=n:i.skylarkjs=n}}(0,this);
//# sourceMappingURL=sourcemaps/osjs-apps-musicplayer.js.map
