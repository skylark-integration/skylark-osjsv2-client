{"version":3,"sources":["main.js"],"names":["define","schemeHtml","Window","OSjs","require","Application","ApplicationProcessViewerWindow","[object Object]","app","metadata","super","icon","title","name","width","height","this","interval","wm","root","init","arguments","_render","view","_find","update","now","Date","rows","getProcesses","forEach","p","alive","__started","iter","value","__pid","id","columns","label","__pname","toString","textalign","push","patch","set","size","on","selected","get","data","kill","setInterval","destroy","clearInterval","Applications","ApplicationProcessViewer","args","settings","_addWindow"],"mappings":";;;;;;;AAAAA,QACI,iBACD,SAAUC,GAEb,MAAMC,EAASC,KAAKC,QAAQ,eACtBC,EAAcF,KAAKC,QAAQ,0BAE3BE,UAAuCJ,EAE3CK,YAAYC,EAAKC,GACfC,MAAM,kCACJC,KAAMF,EAASE,KACfC,MAAOH,EAASI,KAChBC,MAAO,IACPC,OAAQ,KACPP,GAEHQ,KAAKC,SAAW,KAGlBV,KAAKW,EAAIV,GACP,MAAMW,EAAOT,MAAMU,QAAQC,WAG3BL,KAAKM,QAAQ,sBAAuBrB,GAEpC,IAAIsB,EAAOP,KAAKQ,MAAM,QAEtB,SAASC,IACP,IAAIC,EAAM,IAAIC,KACVC,KACJvB,EAAYwB,eAAeC,QAAQ,SAASC,GAC1C,GAAKA,EAAI,CACP,IAAIC,EAAQN,EAAMK,EAAEE,UAChBC,GACFC,MAAOJ,EAAEK,MACTC,GAAIN,EAAEK,MACNE,UACGC,MAAOR,EAAES,UACTD,MAAOR,EAAEK,MAAMK,WAAYC,UAAW,UACtCH,MAAOP,EAAMS,WAAYC,UAAW,WAIzCd,EAAKe,KAAKT,MAIdX,EAAKqB,MAAMhB,GAsBb,OAnBAL,EAAKsB,IAAI,YACNN,MAAO,SACPA,MAAO,MAAOO,KAAM,OAAQJ,UAAW,UACvCH,MAAO,QAASO,KAAM,OAAQJ,UAAW,WAG5C1B,KAAKQ,MAAM,cAAcuB,GAAG,QAAS,WACnC,IAAIC,EAAWzB,EAAK0B,IAAI,YACnBD,GAAYA,EAAS,SAAkC,IAArBA,EAAS,GAAGE,MACjD7C,EAAY8C,KAAKH,EAAS,GAAGE,QAIjClC,KAAKC,SAAWmC,YAAY,WAC1B3B,KACC,KAEHA,IAEON,EAGTZ,UACEG,MAAM2C,WAAWhC,WAEjBL,KAAKC,SAAWqC,cAActC,KAAKC,WAiBvCd,KAAKoD,aAAaC,uCAbqBnD,EAErCE,YAAYkD,EAAMhD,GAChBC,MAAM,2BAA4B+C,EAAMhD,GAG1CF,KAAKmD,EAAUjD,GACbC,MAAMU,QAAQC,WACdL,KAAK2C,WAAW,IAAIrD,EAA+BU,KAAMP","file":"../main.js","sourcesContent":["define([\r\n    \"./scheme.html\"\r\n], function (schemeHtml) {\r\n\r\nconst Window = OSjs.require('core/window');\r\nconst Application = OSjs.require('core/application');\r\n\r\nclass ApplicationProcessViewerWindow extends Window {\r\n\r\n  constructor(app, metadata) {\r\n    super('ApplicationProcessViewerWindow', {\r\n      icon: metadata.icon,\r\n      title: metadata.name,\r\n      width: 400,\r\n      height: 300\r\n    }, app);\r\n\r\n    this.interval = null;\r\n  }\r\n\r\n  init(wm, app) {\r\n    const root = super.init(...arguments);\r\n\r\n    // Load and set up scheme (GUI) here\r\n    this._render('ProcessViewerWindow', schemeHtml);\r\n\r\n    var view = this._find('View');\r\n\r\n    function update() {\r\n      var now = new Date();\r\n      var rows = [];\r\n      Application.getProcesses().forEach(function(p) {\r\n        if ( p ) {\r\n          var alive = now - p.__started;\r\n          var iter = {\r\n            value: p.__pid,\r\n            id: p.__pid,\r\n            columns: [\r\n              {label: p.__pname},\r\n              {label: p.__pid.toString(), textalign: 'right'},\r\n              {label: alive.toString(), textalign: 'right'}\r\n            ]\r\n          };\r\n\r\n          rows.push(iter);\r\n        }\r\n      });\r\n\r\n      view.patch(rows);\r\n    }\r\n\r\n    view.set('columns', [\r\n      {label: 'Name'},\r\n      {label: 'PID', size: '60px', textalign: 'right'},\r\n      {label: 'Alive', size: '60px', textalign: 'right'}\r\n    ]);\r\n\r\n    this._find('ButtonKill').on('click', function() {\r\n      var selected = view.get('selected');\r\n      if ( selected && selected[0] && typeof selected[0].data !== 'undefined' ) {\r\n        Application.kill(selected[0].data);\r\n      }\r\n    });\r\n\r\n    this.interval = setInterval(function() {\r\n      update();\r\n    }, 1000);\r\n\r\n    update();\r\n\r\n    return root;\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy(...arguments);\r\n\r\n    this.interval = clearInterval(this.interval);\r\n  }\r\n}\r\n\r\nclass ApplicationProcessViewer extends Application {\r\n\r\n  constructor(args, metadata) {\r\n    super('ApplicationProcessViewer', args, metadata);\r\n  }\r\n\r\n  init(settings, metadata) {\r\n    super.init(...arguments);\r\n    this._addWindow(new ApplicationProcessViewerWindow(this, metadata));\r\n  }\r\n\r\n}\r\n\r\nOSjs.Applications.ApplicationProcessViewer = ApplicationProcessViewer;\r\n\r\n});"]}