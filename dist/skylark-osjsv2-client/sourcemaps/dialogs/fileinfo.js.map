{"version":3,"sources":["dialogs/fileinfo.js"],"names":["define","DialogWindow","VFS","Locales","[object Object]","args","callback","super","title","Object","assign","_","width","height","this","file","Error","root","init","arguments","txt","_find","set","fileinfo","then","data","info","keys","forEach","i","push","join","catch","error","path"],"mappings":";;;;;;;AAAAA,QACI,iBACA,YACA,mBACD,SAAUC,EAAcC,EAAKC,GAC5B,aACA,qBAAoCF,EAChCG,YAAYC,EAAMC,GAOd,GALAC,MAAM,kBACFC,OAFJH,EAAOI,OAAOC,aAAeL,IAEbG,OAASL,EAAQQ,EAAE,yBAC/BC,MAAO,IACPC,OAAQ,KACTR,EAAMC,IACJQ,KAAKT,KAAKU,KACX,MAAM,IAAIC,MAAM,0CAGxBZ,OACI,MAAMa,EAAOV,MAAMW,QAAQC,WACrBC,EAAMN,KAAKO,MAAM,QAAQC,IAAI,QAASnB,EAAQQ,EAAE,gBAChDI,EAAOD,KAAKT,KAAKU,KAevB,OAdAb,EAAIqB,SAASR,GAAMS,KAAKC,IACpB,MAAMC,KASN,OARAjB,OAAOkB,KAAKF,GAAMG,QAAQC,IACZ,SAANA,EACAH,EAAKI,KAAKD,EAAI,QAAUJ,EAAKI,IAE7BH,EAAKI,KAAKD,EAAI,QAAUJ,EAAKI,MAGrCT,EAAIE,IAAI,QAASI,EAAKK,KAAK,UACpB,IACRC,MAAMC,IACLb,EAAIE,IAAI,QAASnB,EAAQQ,EAAE,mCAAoCI,EAAKmB,SAEjEjB","file":"../../dialogs/fileinfo.js","sourcesContent":["define([\n    '../core/dialog',\n    '../vfs/fs',\n    '../core/locales'\n], function (DialogWindow, VFS, Locales) {\n    'use strict';\n    return class FileInfoDialog extends DialogWindow {\n        constructor(args, callback) {\n            args = Object.assign({}, {}, args);\n            super('FileInfoDialog', {\n                title: args.title || Locales._('DIALOG_FILEINFO_TITLE'),\n                width: 400,\n                height: 400\n            }, args, callback);\n            if (!this.args.file) {\n                throw new Error('You have to select a file for FileInfo');\n            }\n        }\n        init() {\n            const root = super.init(...arguments);\n            const txt = this._find('Info').set('value', Locales._('LBL_LOADING'));\n            const file = this.args.file;\n            VFS.fileinfo(file).then(data => {\n                const info = [];\n                Object.keys(data).forEach(i => {\n                    if (i === 'exif') {\n                        info.push(i + ':\\n\\n' + data[i]);\n                    } else {\n                        info.push(i + ':\\n\\t' + data[i]);\n                    }\n                });\n                txt.set('value', info.join('\\n\\n'));\n                return true;\n            }).catch(error => {\n                txt.set('value', Locales._('DIALOG_FILEINFO_ERROR_LOOKUP_FMT', file.path));\n            });\n            return root;\n        }\n    };\n});"]}