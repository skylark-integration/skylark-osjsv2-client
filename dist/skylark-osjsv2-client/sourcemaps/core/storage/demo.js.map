{"version":3,"sources":["core/storage/demo.js"],"names":["define","Config","Storage","[object Object]","curr","getConfig","localStorage","getItem","clear","setItem","String","Promise","resolve","pool","storage","Object","keys","forEach","key","JSON","stringify","e","console","warn","stack"],"mappings":";;;;;;;AAAAA,QACI,YACA,cACD,SAAUC,EAAQC,GACjB,aACA,qBAAiCA,EAC7BC,OACI,MAAMC,EAAOH,EAAOI,UAAU,WAM9B,OAJID,IADYE,aAAaC,QAAQ,gBAEjCD,aAAaE,QAEjBF,aAAaG,QAAQ,cAAeC,OAAON,IACpCO,QAAQC,UAEnBT,aAAaU,EAAMC,GAWf,OAVAC,OAAOC,KAAKF,GAASG,QAAQC,IACzB,IAAIL,GAAQK,IAAQL,EAGpB,IACIP,aAAaG,QAAQ,QAAUS,EAAKC,KAAKC,UAAUN,EAAQI,KAC7D,MAAOG,GACLC,QAAQC,KAAK,0BAA2BF,EAAGA,EAAEG,UAG9Cb,QAAQC","file":"../../../core/storage/demo.js","sourcesContent":["define([\n    '../config',\n    '../storage'\n], function (Config, Storage) {\n    'use strict';\n    return class DemoStorage extends Storage {\n        init() {\n            const curr = Config.getConfig('Version');\n            const version = localStorage.getItem('__version__');\n            if (curr !== version) {\n                localStorage.clear();\n            }\n            localStorage.setItem('__version__', String(curr));\n            return Promise.resolve();\n        }\n        saveSettings(pool, storage) {\n            Object.keys(storage).forEach(key => {\n                if (pool && key !== pool) {\n                    return;\n                }\n                try {\n                    localStorage.setItem('OSjs/' + key, JSON.stringify(storage[key]));\n                } catch (e) {\n                    console.warn('DemoStorage::settings()', e, e.stack);\n                }\n            });\n            return Promise.resolve();\n        }\n    };\n});"]}